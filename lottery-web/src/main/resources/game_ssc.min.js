if ("object" != typeof console)
    var console = {
        info: function(e) {
            window.status = e
        }
    };
var runTime = {
    remainTimer: 0,
    waitOpenTimer: 0,
    getLastOpenTimer: 0,
    scollTopIntervalTimer: 0,
    traceRemainTimer: 0,
    traceWaitOpenTimer: 0,
    buyTodayTimer: 0,
    clearAll: function() {
        clearInterval(runTime.remainTimer),
        clearInterval(runTime.waitOpenTimer),
        clearInterval(runTime.getLastOpenTimer),
        clearInterval(runTime.scollTopIntervalTimer),
        clearInterval(runTime.traceRemainTimer),
        clearInterval(runTime.traceWaitOpenTimer),
        clearInterval(runTime.buyTodayTimer)
    }
};
!function($) {
    $.init = function(settings) {
        function todayGetCurIssue(e) {
            if (e.code) {
                for (var t = "", a = "", s = 0; s < e.code.length; s++)
                    t += "<b>" + e.code[s] + "</b>",
                    a += e.code[s];
                2 != ps.lotteryType ? $("#todayIssuesBody").prepend('<ul class="fix"><li class="wb40">' + e.issue + '</li><li class="wb60">' + t + '</li></ul>') : $("#todayIssuesBody").prepend('<ul class="fix"><li class="wb40">' + e.issue + '</li><li class="wb60"><b>' + a.split(' ').join('</b><b>') + '</b></li></ul>')
            }
        }
        function subTime(e) {
            var t = e > 0 ? {
                day: Math.floor(e / 86400),
                hour: Math.floor(e % 86400 / 3600),
                minute: Math.floor(e % 3600 / 60),
                second: Math.floor(e % 60)
            } : {
                day: 0,
                hour: 0,
                minute: 0,
                second: 0
            };
            return 1 == (t.hour + "").length && (t.hour = "0" + t.hour),
            1 == (t.minute + "").length && (t.minute = "0" + t.minute),
            1 == (t.second + "").length && (t.second = "0" + t.second),
            t
        }
        function allHasValue(e) {
            var t = 1
              , a = 0;
            return $.each(e, function(e, s) {
                a += s.length,
                0 == s.length && (t = 0)
            }),
            {
                flag: t,
                charsNum: a
            }
        }
        var verifyParams = function() {
            var e = 0;
            return void 0 == settings.lotteryId || !is_numeric(settings.lotteryId) || settings.lotteryId <= 0 ? e = -1 : void 0 == settings.lotteryName || '' == settings.lotteryName ? e = -2 : void 0 != settings.lotteryType && is_numeric(settings.lotteryType) && -1 != $.inArray(settings.lotteryType, [1, 2, 4, 5, 6, 7, 8]) ? void 0 != settings.methods && $.isArray(settings.methods) && 0 != settings.methods.length ? void 0 != settings.openedIssues && $.isArray(settings.openedIssues) && 0 != settings.openedIssues.length ? void 0 != settings.minRebateGaps && $.isArray(settings.minRebateGaps) && 0 != settings.minRebateGaps.length ? void 0 == settings.rebate || !is_numeric(settings.rebate) || settings.rebate < 0 || settings.rebate > .15 ? e = -7 : void 0 != settings.defaultMode && is_numeric(settings.defaultMode) && -1 != !$.inArray(settings.defaultMode, [1, .5, .1, .05, .01, .001]) ? void 0 == settings.defaultRebate || !is_numeric(settings.defaultRebate) || settings.defaultRebate < 0 || settings.defaultRebate > settings.rebate ? e = -9 : (void 0 == settings.maxCombPrize || !is_numeric(settings.maxCombPrize) || settings.maxCombPrize <= 0) && (e = -10) : e = -8 : e = -6 : e = -5 : e = -4 : e = -3,
            e < 0 && console.info('参数错误：flag=' + e),
            0 == e
        }
          , ps = $.extend({
            counter: 0,
            lotteryId: 1,
            lotteryName: 'CQSSC',
            lotteryType: 1,
            property_id: 1,
            methods: [],
            maxCombPrize: 0,
            openedIssues: [],
            minRebateGaps: [{
                from: 0,
                to: .12,
                gap: .005
            }, {
                from: .12,
                to: .125,
                gap: .001
            }],
            rebate: .123,
            defaultMode: 1,
            defaultRebate: .123,
            missHot: {
                miss: [],
                hot: []
            },
            halt: function(e) {
                throw alert(e + '!'),
                e
            },
            prizeRate: 0,
            curIssueInfo: {},
            lastIssueInfo: {},
            curMode: 0,
            curMethod: {},
            curProjects: [],
            nextProjectCounter: 0,
            curPrizeIndex: -1,
            rebateGapList: [],
            todayDrawList: [],
            curServerTime: '',
            curRemainTime: 0,
            remainTimer: {},
            curWaitOpenTime: 0,
            waitOpenTimer: {},
            getLastOpenTime: 0,
            getLastOpenTimer: {},
            canBuy: !1,
            traceMethodPrize: 0,
            tracePrizeLimit: 0,
            canTraceIssues: [],
            counters: 0
        }, settings)
          , helper = {
            SXBD: {
                0: 1,
                1: 1,
                2: 2,
                3: 3,
                4: 4,
                5: 5,
                6: 7,
                7: 8,
                8: 10,
                9: 12,
                10: 13,
                11: 14,
                12: 15,
                13: 15,
                14: 15,
                15: 15,
                16: 14,
                17: 13,
                18: 12,
                19: 10,
                20: 8,
                21: 7,
                22: 5,
                23: 4,
                24: 3,
                25: 2,
                26: 1,
                27: 1
            },
            EXBD: {
                0: 1,
                1: 1,
                2: 2,
                3: 2,
                4: 3,
                5: 3,
                6: 4,
                7: 4,
                8: 5,
                9: 5,
                10: 5,
                11: 4,
                12: 4,
                13: 3,
                14: 3,
                15: 2,
                16: 2,
                17: 1,
                18: 1
            },
            SXHZ: {
                0: 1,
                1: 3,
                2: 6,
                3: 10,
                4: 15,
                5: 21,
                6: 28,
                7: 36,
                8: 45,
                9: 55,
                10: 63,
                11: 69,
                12: 73,
                13: 75,
                14: 75,
                15: 73,
                16: 69,
                17: 63,
                18: 55,
                19: 45,
                20: 36,
                21: 28,
                22: 21,
                23: 15,
                24: 10,
                25: 6,
                26: 3,
                27: 1
            },
            EXHZ: {
                0: 1,
                1: 2,
                2: 3,
                3: 4,
                4: 5,
                5: 6,
                6: 7,
                7: 8,
                8: 9,
                9: 10,
                10: 9,
                11: 8,
                12: 7,
                13: 6,
                14: 5,
                15: 4,
                16: 3,
                17: 2,
                18: 1
            },
            SXZXHZ: {
                1: 1,
                2: 2,
                3: 2,
                4: 4,
                5: 5,
                6: 6,
                7: 8,
                8: 10,
                9: 11,
                10: 13,
                11: 14,
                12: 14,
                13: 15,
                14: 15,
                15: 14,
                16: 14,
                17: 13,
                18: 11,
                19: 10,
                20: 8,
                21: 6,
                22: 5,
                23: 4,
                24: 2,
                25: 2,
                26: 1
            },
            pokerNumMaps: {
                A: 1,
                2: 2,
                3: 3,
                4: 4,
                5: 5,
                6: 6,
                7: 7,
                8: 8,
                9: 9,
                T: 10,
                J: 11,
                Q: 12,
                K: 13
            },
            factorial: function(e) {
                return e <= 1 ? 1 : e * helper.factorial(e - 1)
            },
            getNumByIssue: function(e) {
                if (0 == e.length)
                    return !1;
                var t = e.indexOf("-");
                return -1 != t ? e.substr(t + 1) : e.substr(e.length - 3)
            },
            expandLotto: function(e) {
                var t = []
                  , a = []
                  , s = 0;
                if ($.each(e, function(e, t) {
                    if ("" != $.trim(t)) {
                        var l = t.split("_");
                        l.sort(),
                        a.push(l)
                    } else
                        s = 1
                }),
                s)
                    return [];
                var l, i, r, n, o;
                switch (e.length) {
                case 2:
                    for (l = 0; l < a[0].length; l++)
                        for (i = 0; i < a[1].length; i++)
                            t.push(a[0][l] + " " + a[1][i]);
                    break;
                case 3:
                    for (l = 0; l < a[0].length; l++)
                        for (i = 0; i < a[1].length; i++)
                            for (r = 0; r < a[2].length; r++)
                                t.push(a[0][l] + " " + a[1][i] + " " + a[2][r]);
                    break;
                case 5:
                    for (l = 0; l < a[0].length; l++)
                        for (i = 0; i < a[1].length; i++)
                            for (r = 0; r < a[2].length; r++)
                                for (n = 0; n < a[3].length; n++)
                                    for (o = 0; o < a[4].length; o++)
                                        t.push(a[0][l] + " " + a[1][i] + " " + a[2][r] + " " + a[2][n] + " " + a[2][o]);
                    break;
                default:
                    throw "unkown expand"
                }
                var c = [];
                return $.each(t, function(e, t) {
                    var a = t.split(" ");
                    array_unique(a).length == a.length && c.push(t)
                }),
                c
            }
        }
          , tool = {
            uniqueArr: function(e) {
                for (var t = {}, a = e.length, s = [], l = 0; l < a; l++)
                    t[e[l]] || (t[e[l]] = !0,
                    s.push(e[l]));
                return s
            }
        }
          , initModesBar = function() {
            var e = 1
              , t = parseFloat(getCookie("mod_" + ps.lotteryId));
            switch ($.each([1, .5, .1, .05, .01, .001], function(a, s) {
                s == t && (e = s)
            }),
            ps.curMode = e,
            $("#yuan").click(function() {
                $("#yuan").removeClass().addClass("yuan"),
                $("#jiao").removeClass(),
                $("#fen").removeClass(),
                $("#li").removeClass(),
                $("#yuanYi").removeClass(),
                $("#jiaoYi").removeClass(),
                $("#modesDIV").val(1),
                modesBar.modesBtn_Click()
            }),
            $("#jiao").click(function() {
                $("#jiao").removeClass().addClass("jiao"),
                $("#yuan").removeClass(),
                $("#fen").removeClass(),
                $("#li").removeClass(),
                $("#yuanYi").removeClass(),
                $("#jiaoYi").removeClass(),
                $("#modesDIV").val(.1),
                modesBar.modesBtn_Click()
            }),
            $("#fen").click(function() {
                $("#fen").removeClass().addClass("fen"),
                $("#jiao").removeClass(),
                $("#yuan").removeClass(),
                $("#li").removeClass(),
                $("#yuanYi").removeClass(),
                $("#jiaoYi").removeClass(),
                $("#modesDIV").val(.01),
                modesBar.modesBtn_Click()
            }),
            $("#yuanYi").click(function() {
                $("#yuanYi").removeClass().addClass("yuanYi"),
                $("#jiao").removeClass(),
                $("#yuan").removeClass(),
                $("#fen").removeClass(),
                $("#jiaoYi").removeClass(),
                $("#li").removeClass(),
                $("#modesDIV").val(.5),
                modesBar.modesBtn_Click()
            }),
            $("#jiaoYi").click(function() {
                $("#jiaoYi").removeClass().addClass("jiaoYi"),
                $("#jiao").removeClass(),
                $("#yuan").removeClass(),
                $("#yuanYi").removeClass(),
                $("#fen").removeClass(),
                $("#li").removeClass(),
                $("#modesDIV").val(.05),
                modesBar.modesBtn_Click()
            }),
            $("#li").click(function() {
                $("#li").removeClass().addClass("li"),
                $("#fen").removeClass(),
                $("#jiao").removeClass(),
                $("#yuan").removeClass(),
                $("#yuanYi").removeClass(),
                $("#jiaoYi").removeClass(),
                $("#modesDIV").val(.001),
                modesBar.modesBtn_Click()
            }),
            ps.curMode) {
            case 1:
                $("#yuan").click();
                break;
            case .5:
                $("#yuanYi").click();
            case .1:
                $("#jiao").click();
                break;
            case .05:
                $("#jiaoYi").click();
                break;
            case .01:
                $("#fen").click();
                break;
            case .001:
                $("#li").click()
            }
        }
          , modesBar = {
            modesBtn_Click: function() {
                var e = $("#modesDIV").val();
                $('#projectList').children('li').length > 0 ? parent.layer.confirm('切换元角分模式将影响您现有投注项，是否继续？', {
                    icon: 7
                }, function(t) {
                    ps.curMode = e,
                    buyBar.updateTotalSingle(),
                    0 != $('#betCount').text() && buyBar.updateSingle($('#betCount').text()),
                    modesBar.saveLastModes(),
                    prizeBar.showPirze(),
                    parent.layer.close(t)
                }, function(e) {
                    switch (ps.curMode) {
                    case '1':
                        $("#yuan").removeClass().addClass("yuan"),
                        $("#jiao").removeClass().addClass("jiao_off"),
                        $("#fen").removeClass().addClass("fen_off"),
                        $("#li").removeClass().addClass("li_off"),
                        $("#yuanYi").removeClass().addClass("yuanYi_off"),
                        $("#jiaoYi").removeClass().addClass("jiaoYi_off");
                        break;
                    case '0.5':
                        $("#yuan").removeClass().addClass("yuan_off"),
                        $("#jiao").removeClass().addClass("jiao_off"),
                        $("#fen").removeClass().addClass("fen_off"),
                        $("#li").removeClass().addClass("li_off"),
                        $("#yuanYi").removeClass().addClass("yuanYi"),
                        $("#jiaoYi").removeClass().addClass("jiaoYi_off");
                        break;
                    case '0.1':
                        $("#yuan").removeClass().addClass("yuan_off"),
                        $("#jiao").removeClass().addClass("jiao"),
                        $("#fen").removeClass().addClass("fen_off"),
                        $("#li").removeClass().addClass("li_off"),
                        $("#yuanYi").removeClass().addClass("yuanYi_off"),
                        $("#jiaoYi").removeClass().addClass("jiaoYi_off");
                        break;
                    case '0.05':
                        $("#yuan").removeClass().addClass("yuan_off"),
                        $("#jiao").removeClass().addClass("jiao_off"),
                        $("#fen").removeClass().addClass("fen_off"),
                        $("#li").removeClass().addClass("li_off"),
                        $("#yuanYi").removeClass().addClass("yuanYi_off"),
                        $("#jiaoYi").removeClass().addClass("jiaoYi");
                        break;
                    case '0.01':
                        $("#yuan").removeClass().addClass("yuan_off"),
                        $("#jiao").removeClass().addClass("jiao_off"),
                        $("#fen").removeClass().addClass("fen"),
                        $("#li").removeClass().addClass("li_off"),
                        $("#yuanYi").removeClass().addClass("yuanYi_off"),
                        $("#jiaoYi").removeClass().addClass("jiaoYi_off");
                        break;
                    case '0.001':
                        $("#li").removeClass().addClass("li"),
                        $("#yuan").removeClass().addClass("yuan_off"),
                        $("#jiao").removeClass().addClass("jiao_off"),
                        $("#fen").removeClass().addClass("fen_off"),
                        $("#yuanYi").removeClass().addClass("yuanYi_off"),
                        $("#jiaoYi").removeClass().addClass("jiaoYi_off")
                    }
                    $("#modesDIV").val(ps.curMode)
                }) : (ps.curMode = e,
                0 != $('#betCount').text() && buyBar.updateSingle($('#betCount').text()),
                modesBar.saveLastModes(),
                prizeBar.showPirze())
            },
            saveLastModes: function() {
                setCookie('mod_' + ps.lotteryId, ps.curMode, 2592e3)
            }
        }
          , initPrizeBar = function() {
            ps.rebateGapList = prizeBar.generateGapList(),
            0 == ps.rebateGapList.size && ps.halt("initPrizeBar failed"),
            ps.curPrizeIndex = ps.rebateGapList.size - 1,
            prizeBar.showPirze(),
            $('#curPrizeSpan').change(prizeBar.changePrize)
        }
          , prizeBar = {
            changePrize: function() {
                if (!0 !== $.isEmptyObject(ps.curMethod) && ps.curMethod.description.indexOf("@P@") > 0) {
                    for (var e = $("#curPrizeSpan option:selected").text().split("/"), t = '', a = ps.curMethod.description.split("@P@"), s = 1; s < a.length; s++)
                        void 0 != ps.curMethod.prize[s] && (t += a[s - 1] + Math.round(ps.curMethod.prize[s] * e[0] / ps.curMethod.prize[1] * 1e4) / 1e4 + "元");
                    t += a[a.length - 1],
                    $("#methodDesc").text(t)
                }
                ps.curPrizeIndex = parseInt($("#curPrizeSpan").val()),
                prizeBar.saveLastPrize(),
                buyBar.updateTotalSingle()
            },
            generateGapList: function() {
                var e = [];
                $.each(ps.minRebateGaps, function(t, a) {
                    if (a.from = parseFloat(a.from),
                    a.to = parseFloat(a.to),
                    a.gap = parseFloat(a.gap),
                    ps.rebate > a.to)
                        for (var s = a.from; s <= a.to; s += a.gap)
                            e.push(parseFloat(number_format(s, 3)));
                    else {
                        for (s = a.from; s < a.to && s < ps.rebate; s += a.gap)
                            e.push(parseFloat(number_format(s, 3)));
                        e.push(parseFloat(number_format(ps.rebate, 3)))
                    }
                }),
                e = array_unique(e);
                var t = new Map;
                return e.forEach(function(e, a) {
                    var s = 0;
                    s = 7 == ps.lotteryType ? Math.floor(ps.maxCombPrize / 24 * (ps.prizeRate + e), 0) : round(ps.maxCombPrize * (ps.prizeRate + e), 0),
                    t.set(a, {
                        rebate: round(ps.rebate - e, 3),
                        prize: s
                    })
                }),
                t
            },
            showPirze: function() {
                !0 !== $.isEmptyObject(ps.curMethod) && ($('#curPrizeSpan').empty(),
                ps.rebateGapList.forEach(function(e, t) {
                    var a = toFixed(ps.curMode * ps.curMethod.prize[1] * (1e4 * ps.prizeRate + 1e4 * ps.rebate - 1e4 * e.rebate) / (1e4 * ps.prizeRate), 3)
                      , s = toFixed(ps.curMode * ps.curMethod.prize[2] * (1e4 * ps.prizeRate + 1e4 * ps.rebate - 1e4 * e.rebate) / (1e4 * ps.prizeRate), 3)
                      , l = toFixed(ps.curMode * ps.curMethod.prize[3] * (1e4 * ps.prizeRate + 1e4 * ps.rebate - 1e4 * e.rebate) / (1e4 * ps.prizeRate), 3)
                      , i = toFixed(ps.curMode * ps.curMethod.prize[4] * (1e4 * ps.prizeRate + 1e4 * ps.rebate - 1e4 * e.rebate) / (1e4 * ps.prizeRate), 3)
                      , r = toFixed(ps.curMode * ps.curMethod.prize[5] * (1e4 * ps.prizeRate + 1e4 * ps.rebate - 1e4 * e.rebate) / (1e4 * ps.prizeRate), 3)
                      , n = toFixed(ps.curMode * ps.curMethod.prize[6] * (1e4 * ps.prizeRate + 1e4 * ps.rebate - 1e4 * e.rebate) / (1e4 * ps.prizeRate), 3)
                      , o = number_format(100 * parseFloat(e.rebate), 1);
                    '定单双' == ps.curMethod.cname ? $('#curPrizeSpan').append('<option value="' + t + '">' + a + ',' + s + ',' + l + ',' + i + ',' + r + ',' + n + '/' + o + '%</option>') : '猜中位' == ps.curMethod.cname ? $('#curPrizeSpan').append('<option value="' + t + '">' + a + ',' + s + ',' + l + ',' + i + '/' + o + '%</option>') : '前三混合组选' == ps.curMethod.cname || '中三混合组选' == ps.curMethod.cname || '后三混合组选' == ps.curMethod.cname || '混合组选' == ps.curMethod.cname || '组选和值' == ps.curMethod.cname ? $('#curPrizeSpan').append('<option value="' + t + '">一等奖:' + a + ';二等奖:' + s + '/' + o + '%</option>') : $('#curPrizeSpan').append('<option value="' + t + '">' + a + '/' + o + '%</option>')
                }),
                $("#curPrizeSpan").val(ps.curPrizeIndex),
                prizeBar.changePrize(),
                $('#selectRebate').slider({
                    range: 'min',
                    min: 0,
                    max: $('#curPrizeSpan option').length - 1,
                    value: $('#curPrizeSpan option:selected').index(),
                    slide: function(e, t) {
                        $('#curPrizeSpan option').removeAttr('selected'),
                        $('#curPrizeSpan option').eq(t.value).attr('selected', !0),
                        '定单双' == ps.curMethod.cname ? ($('#rebateValue').html($('#curPrizeSpan option').eq(t.value).html().split('/')[1]),
                        $('.ballPrize_1').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[0]),
                        $('.ballPrize_2').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[2]),
                        $('.ballPrize_3').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[4]),
                        $('.ballPrize_4').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[5]),
                        $('.ballPrize_5').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[3]),
                        $('.ballPrize_6').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[1]),
                        $('#rebateValue').siblings('span').html('返点')) : '猜中位' == ps.curMethod.cname ? ($('#rebateValue').html($('#curPrizeSpan option').eq(t.value).html().split('/')[1]),
                        $('.ballPrize1_1').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[0]),
                        $('.ballPrize1_2').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[1]),
                        $('.ballPrize1_3').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[2]),
                        $('.ballPrize1_4').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[3]),
                        $('.ballPrize1_5').html($('#curPrizeSpan option').eq(t.value).html().split('/')[0].split(',')[4]),
                        $('#rebateValue').siblings('span').html('返点')) : '前三混合组选' == ps.curMethod.cname || '中三混合组选' == ps.curMethod.cname || '后三混合组选' == ps.curMethod.cname || '混合组选' == ps.curMethod.cname || '组选和值' == ps.curMethod.cname ? ($('#rebateValue').html($('#curPrizeSpan option:selected').html()),
                        $('#rebateValue').siblings('span').html('赔率/返点')) : ($('#rebateValue').html($('#curPrizeSpan option').eq(t.value).html()),
                        $('#rebateValue').siblings('span').html('奖金/返点')),
                        $('#curPrizeSpan').change(),
                        ps.curPrizeIndex = parseInt(t.value)
                    }
                }),
                '定单双' == ps.curMethod.cname ? ($('#rebateValue').html($('#curPrizeSpan option:selected').html().split('/')[1]),
                $('.ballPrize_1').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[0]),
                $('.ballPrize_2').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[2]),
                $('.ballPrize_3').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[4]),
                $('.ballPrize_4').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[5]),
                $('.ballPrize_5').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[3]),
                $('.ballPrize_6').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[1]),
                $('#rebateValue').siblings('span').html('返点')) : '猜中位' == ps.curMethod.cname ? ($('#rebateValue').html($('#curPrizeSpan option:selected').html().split('/')[1]),
                $('.ballPrize1_1').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[0]),
                $('.ballPrize1_2').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[1]),
                $('.ballPrize1_3').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[2]),
                $('.ballPrize1_4').html($('#curPrizeSpan option:selected').html().split('/')[0].split(',')[3]),
                $('#rebateValue').siblings('span').html('返点')) : ($('#rebateValue').html($('#curPrizeSpan option:selected').html()),
                $('#rebateValue').siblings('span').html('奖金/返点')))
            },
            saveLastPrize: function() {
                setCookie("reb_" + ps.lotteryId, ps.rebateGapList.get(ps.curPrizeIndex).rebate, 2592e3)
            }
        }
          , initMethodBar = function() {
            $.each(ps.methods, function(e, t) {
                1 == t.childs.length ? $('<li class="methodGroupLI" id="methodGroup_' + e + '"><label>' + t.mg_name + "</label></li>").click(methodBar.methodGroup_Click).appendTo("#methodGroupContainer") : $('<li class="methodGroupLI" id="methodGroup_' + e + '"><label>' + t.mg_name + "</label></li>").click(methodBar.methodGroup_Click).hover(methodBar.methodGroup_hoverOver, methodBar.methodGroup_hoverOut).appendTo("#methodGroupContainer");
                var a = ''
                  , s = ''
                  , l = ''
                  , i = ''
                  , r = ''
                  , n = ''
                  , o = ''
                  , c = ''
                  , p = ''
                  , d = ''
                  , u = '';
                6 == t.mg_id || 50 == t.mg_id || 57 == t.mg_id || 169 == t.mg_id || 42 == t.mg_id ? (d = '<dl class="fix"><dt>任选复式：</dt>',
                u = '<dl class="fix"><dt>任选单式：</dt>') : (a = '<dl class="fix"><dt>直选：</dt>',
                s = '<dl class="fix"><dt>组选：</dt>',
                l = '<dl class="fix"><dt>趣味：</dt>',
                i = '<dl class="fix"><dt>特殊：</dt>',
                r = '<dl class="fix"><dt>定位：</dt>',
                n = '<dl class="fix"><dt>不定位：</dt>',
                o = '<dl class="fix"><dt>任选二：</dt>',
                c = '<dl class="fix"><dt>任选三：</dt>',
                p = '<dl class="fix"><dt>任选四：</dt>',
                d = '<dl class="fix"><dt>其他：</dt>');
                var h;
                h = 0 == e ? $('<div id="method_' + e + '" class="methodControl"></div>').addClass('methodPopStyle') : $('<div id="method_' + e + '" class="methodControl"></div>').addClass('methodPopStyle').hide(),
                $.each(t.childs, function(h, m) {
                    var f = '<dd class="method" name="' + m.name + '" pid="method_' + e + '" id="method_' + e + "_" + h + '">' + m.cname + '</dd>'
                      , $ = '';
                    1 == m.method_property ? a += f : 2 == m.method_property ? s += f : 3 == m.method_property ? l += f : 4 == m.method_property ? i += f : 5 == m.method_property ? r += f : 6 == m.method_property ? n += f : 7 == m.method_property ? o += f : 8 == m.method_property ? c += f : 9 == m.method_property ? p += f : 0 == m.method_property && (d += f),
                    1 == m.can_input && ($ = '<dd class="method" name="' + m.name + "son\" pid=\"method_" + e + '" id="method_' + e + "_" + h + "son\">" + m.cname + "单式</dd>",
                    1 == m.method_property ? a += $ : 2 == m.method_property ? s += $ : 3 == m.method_property ? l += $ : 4 == m.method_property ? i += $ : 5 == m.method_property ? r += $ : 6 == m.method_property ? n += $ : 7 == m.method_property ? o += $ : 8 == m.method_property ? c += $ : 9 == m.method_property ? p += $ : 0 == m.method_property && (6 == t.mg_id || 50 == t.mg_id || 57 == t.mg_id || 169 == t.mg_id || 42 == t.mg_id ? u += $ : d += $))
                }),
                s += '</dl>',
                l += '</dl>',
                i += '</dl>',
                r += '</dl>',
                n += '</dl>',
                o += '</dl>',
                c += '</dl>',
                p += '</dl>',
                d += '</dl>',
                u += '</dl>',
                (a += '</dl>').indexOf('</dd>') < 0 && (a = ''),
                s.indexOf('</dd>') < 0 && (s = ''),
                l.indexOf('</dd>') < 0 && (l = ''),
                i.indexOf('</dd>') < 0 && (i = ''),
                r.indexOf('</dd>') < 0 && (r = ''),
                n.indexOf('</dd>') < 0 && (n = ''),
                o.indexOf('</dd>') < 0 && (o = ''),
                c.indexOf('</dd>') < 0 && (c = ''),
                p.indexOf('</dd>') < 0 && (p = ''),
                d.indexOf('</dd>') < 0 && (d = ''),
                u.indexOf('</dd>') < 0 && (u = ''),
                $(a + s + l + i + r + n + o + c + p + d + u).appendTo(h),
                $.each(t.childs, function(t, a) {
                    $('#method_' + e + "_" + t).live("click", a, methodBar.method_Click).hover(methodBar.method_hoverOver, methodBar.methodGroup_hoverOut),
                    $("#method_" + e + "_" + t + "son").live("click", a, buyBar.inputBtn_Click).hover(methodBar.method_hoverOver, methodBar.methodGroup_hoverOut)
                }),
                $("#methods").append(h)
            }),
            $(".subTopBar").mouseleave(function() {
                $(this).find("li").removeClass("methodGroup_hover")
            }),
            methodBar.selectDefault()
        }
          , methodBar = {
            methodGroup_Click: function(e) {
                $(this).addClass("methodGroup_selected").siblings().removeClass("methodGroup_selected methodGroup_hover"),
                $(e.target).is('label') && ($(this).find('dd:first').click(),
                $("#traceBtn").show(),
                $(".choMainTab").children('.progressBar') && ($(".progressBar").remove(),
                $(".choMainTab").css("padding-top", ""))),
                $(this).addClass("methodGroup_hover"),
                /\w+_(\d+)/.test($(this).attr("id"));
                var t = RegExp.$1;
                $(".playNav ul .methodPopStyle").hide(),
                $(this).find('.methodPopStyle').show(),
                $(".methodControl").hide(),
                $("#method_" + t).show(),
                $("#method_" + t + "_0").click()
            },
            methodGroup_hoverOver: function() {
                $(this).addClass("methodGroup_hover"),
                $(this).hasClass("methodGroup_selected") && $(this).find('.methodPopStyle').show()
            },
            methodGroup_hoverOut: function() {
                $(this).removeClass("methodGroup_hover"),
                /\w+_(\d+)/.test($(this).attr("id"));
                RegExp.$1
            },
            method_hoverOver: function() {
                $(this).addClass("method_hover"),
                /\w+_(\d+)/.test($(this).attr("id"));
                RegExp.$1;
                $(this).find('.methodPopStyle').show()
            },
            method_hoverOut: function() {
                $(this).removeClass("method_hover"),
                /\w+_(\d+)/.test($(this).attr("id"));
                RegExp.$1;
                $(this).find('.methodPopStyle').hide()
            },
            method_Click: function(e) {
                ps.curMethod = e.data;
                var t = $(this)
                  , a = t.attr("pid");
                $("#" + a).find('.method').removeClass("method_selected"),
                t.addClass("method_selected"),
                $('#curMethod').text(ps.curMethod.cname),
                $("#methodDesc").text(ps.curMethod.description).hide(),
                $("#methodTipInfo").hover(function() {
                    layer.tips($("#methodDesc").text(), this, {
                        tips: [2, '#f13131'],
                        maxWidth: 250,
                        time: 0,
                        closeBtn: 0
                    })
                }, function() {
                    layer.closeAll('tips')
                }),
                ballBar.generateBall(),
                $(".selectRandomBtn").parent().hide(),
                buyBar.updateSingle(0),
                prizeBar.showPirze(),
                0 == propLen(ps.curMethod.field_def) && (ballBar.showInput(),
                $("#singleInfo").show(),
                $("#selectArea").removeClass("N-selected")),
                2 == propLen(ps.curMethod.field_def) && $(".locate").css("padding", "10px 0"),
                3 == propLen(ps.curMethod.field_def) && $(".locate").css("padding", "10px 0"),
                4 == propLen(ps.curMethod.field_def) && $(".locate").css("padding", "5px 0")
            },
            selectDefault: function() {
                var e = ps.methods[0].mg_name;
                $("#methodGroupContainer").find(":contains(" + e + ")")[0].click()
            }
        }
          , ballBar = {
            reset: function() {
                $.isEmptyObject(ps.curMethod.field_def) || ($.each(ps.curMethod.field_def, function(e, t) {
                    $('#field_' + e).children().removeClass('ball_Selected')
                }),
                buyBar.updateSingle(0))
            },
            showInput: function() {
                if ($("#selectArea").children().remove(),
                1 == ps.lotteryType) {
                    var e = {
                        376: 2,
                        377: 3,
                        378: 2,
                        379: 3,
                        380: 2,
                        381: 3,
                        382: 2,
                        383: 3,
                        384: 2,
                        385: 3,
                        583: 4,
                        584: 4,
                        585: 4,
                        586: 4,
                        587: 4,
                        588: 4,
                        666: 2,
                        667: 3,
                        691: 4
                    }
                      , t = '<div class="manualInput fix"><div class="manualInputTop"><ul><li><p class="NumbBasket">号码篮</p><textarea cols="" rows="" class="inputTA MachineSeleBg" id="inputTA"></textarea></li><li id="delTA" class="delTA custBtnStyle">清空号码</li></div><div class="manualInputBottom"><li class="inputTip1"><p>提示：</p><p>请把您已有的大底号码复制或者输入到下边文本框中。</p><p>每注号码之间用 空格 或者换行符 隔开，每注号码每位之间不使用任何分隔符。</p><p>仅支持单式。 </p></li><li class="inputTip2"><p>例如：</p><p id="inputExample">'
                      , a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
                    if (e[ps.curMethod.method_id] > 0) {
                        for (var s = new Array, l = 1; l <= e[ps.curMethod.method_id]; l++)
                            s[l] = 'checked';
                        t = '<div class="manualInput fix"><div class="manualInputTop"><span class="RX_checkbox"><input type="checkbox" name="rx" value=0 ' + s[5] + '>万位&nbsp;&nbsp;<input type="checkbox" name="rx" value=1 ' + s[4] + '>千位&nbsp;&nbsp;<input type="checkbox" name="rx" value=2 ' + s[3] + '>百位&nbsp;&nbsp;<input type="checkbox" name="rx" value=3 ' + s[2] + '>十位&nbsp;&nbsp;<input type="checkbox" name="rx" value=4 ' + s[1] + '>个位</span><ul><li><p class="NumbBasket">号码篮</p><textarea cols="" rows="" class="inputTA MachineSeleBg" id="inputTA"></textarea></li><li id="delTA" class="delTA custBtnStyle">清空号码</li></div><div class="manualInputBottom"><li class="inputTip1"><p>提示：</p><p>请把您已有的大底号码复制或者输入到下边文本框中。</p><p>每注号码之间用 空格 或者换行符 隔开，每注号码每位之间不使用任何分隔符。</p><p>仅支持单式。</p></li><li class="inputTip2"><p>例如：</p><p id="inputExample">'
                    }
                    "SXHHZX" == ps.curMethod.name || "ZSHHZX" == ps.curMethod.name || "QSHHZX" == ps.curMethod.name ? t += "123 112<br></p></li></ul></div></div>" : 'REZX' == ps.curMethod.name ? t += "12 34 68<br></p></li></ul></div></div>" : 'RSZX' == ps.curMethod.name ? t += "123 456 334<br></p></li></ul></div></div>" : 'RSIZX' == ps.curMethod.name ? t += "1234 4567 3354<br></p></li></ul></div></div>" : t += a.slice(0, propLen(ps.curMethod.field_def)).join("") + " " + a.slice(propLen(ps.curMethod.field_def), propLen(ps.curMethod.field_def) + propLen(ps.curMethod.field_def)).join("") + "<br></p></li></div></div>"
                } else if (2 == ps.lotteryType) {
                    var i, t = '<div class="manualInput fix"><div class="manualInputTop"><ul><li><p class="NumbBasket">号码篮</p><textarea cols="" rows="" class="inputTA MachineSeleBg" id="inputTA"></textarea></li><li id="delTA" class="delTA custBtnStyle">清空号码</li></div><div class="manualInputBottom"><li class="inputTip1"><p>提示：</p><p>请把您已有的大底号码复制或者输入到下边文本框中。</p><p>每注号码之间必须用 换行  隔开，每注号码每位之间必须使用 空格 作为分隔。</p><p>仅支持单式。 </p></li><li class="inputTip2"><p>例如：</p><p id="inputExample">', a = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11"];
                    i = /SDRX(\d+)/.test(ps.curMethod.name) ? parseInt(RegExp.$1) : 'SDQSZUX' == ps.curMethod.name ? 3 : 'SDQEZUX' == ps.curMethod.name ? 2 : propLen(ps.curMethod.field_def),
                    t += a.slice(0, i).join(" ") + "<br/>" + a.slice(1, 1 + i).join(" ") + "<br></p></li></ul></div></div>"
                } else if (4 == ps.lotteryType) {
                    var t = '<div class="manualInput fix"><div class="manualInputTop"></a><ul><li><p class="NumbBasket">号码篮</p><textarea cols="" rows="" class="inputTA MachineSeleBg" id="inputTA"></textarea></li><li id="delTA" class="delTA custBtnStyle">清空号码</li></div><div class="manualInputBottom"><li class="inputTip1"><p>提示：</p><p>请把您已有的大底号码复制或者输入到下边文本框中。</p><p>每注号码之间用 空格 或者换行符 隔开，每注号码每位之间不使用任何分隔符。</p><p>仅支持单式。 </p></li><li class="inputTip2"><p>例如：</p><p id="inputExample">'
                      , a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
                    "SXHHZX" == ps.curMethod.name ? t += "123 112<br></p></li></ul></div></div>" : t += a.slice(0, propLen(ps.curMethod.field_def)).join("") + " " + a.slice(propLen(ps.curMethod.field_def), propLen(ps.curMethod.field_def) + propLen(ps.curMethod.field_def)).join("") + "<br></p></li></ul></div></div>"
                }
                $(t).appendTo("#selectArea"),
                $("#delTA").click(function() {
                    $("#inputTA").val(""),
                    $(".FatherCodeBtn").removeClass("selectCodeBtn_selected")
                }),
                $("#inputTA").live('keyup', function() {
                    '' != $("#inputTA").val() ? ($(".FatherCodeBtn").addClass('selectCodeBtn_selected'),
                    $(this).removeClass('MachineSeleBg')) : ($(".FatherCodeBtn").removeClass('selectCodeBtn_selected'),
                    $(this).addClass('MachineSeleBg'))
                })
            },
            generateBall: function() {
                var btn = document.getElementById('stochastic');
                btn && ("QSHHZX" == ps.curMethod.name || "ZSHHZX" == ps.curMethod.name || "SXHHZX" == ps.curMethod.name ? btn.style.display = "none" : btn.style.display = "block"),
                $("#selectArea").children().remove();
                var filterBtn = '<li class="Quick"><div class="QuickChoose"><dl class="navSub"><dd>全</dd><dd>奇</dd><dd>偶</dd> <dd>大</dd><dd>小</dd><dd>清</dd></dl></div></li>';
                if (7 == ps.lotteryType)
                    var filterBtn = '<li class="SelectControl"><div class="QuickChoose"><dl class="navSub"><dd class="allSelect">全选</dd><dd class="clearSelect">清除</dd></dl></div></li>';
                $.each(ps.curMethod.field_def, function(i, prop) {
                    var numList = prop.nums.split(" ")
                      , ballStr = ''
                      , hzbdStr = ""
                      , prizeStr = "";
                    $.each(numList, function(ii, nn) {
                        switch (ps.curMethod.name) {
                        case "SXBD":
                        case "ZSBD":
                        case "QSBD":
                            ballStr += '<li>' + nn + '</li>',
                            hzbdStr += '<li>' + helper.SXBD[ii] + '</li>';
                            break;
                        case "SXHZ":
                        case "ZSHZ":
                        case "QSHZ":
                            ballStr += '<li>' + nn + '</li>',
                            hzbdStr += '<li>' + helper.SXHZ[ii] + '</li>';
                            break;
                        case "EXBD":
                        case "QEBD":
                            ballStr += '<li>' + nn + '</li>',
                            hzbdStr += '<li>' + helper.EXBD[ii] + '</li>';
                            break;
                        case "EXHZ":
                        case "QEHZ":
                            ballStr += '<li>' + nn + '</li>',
                            hzbdStr += '<li>' + helper.EXHZ[ii] + '</li>';
                            break;
                        case 'SXZXHZ':
                        case 'QSZXHZ':
                            ballStr += '<li>' + nn + '</li>',
                            hzbdStr += '<li>' + helper.SXZXHZ[ii + 1] + '</li>';
                            break;
                        case 'PKSZ':
                        case 'PKBZ':
                            var tmp = nn.split("");
                            ballStr += '<li><div zhuma="' + nn + '"><span><i>' + drawBar.translateT(tmp[0]) + '</i></span><span class="p2"><i>' + drawBar.translateT(tmp[1]) + '</i></span><span class="cover"><i>' + drawBar.translateT(tmp[2]) + '</i><em></em></span><i class="gou"></i></div></li>';
                            break;
                        case 'PKDZ':
                            var tmp = nn.split("");
                            ballStr += '<li><div zhuma="' + nn + '"><span><i>' + drawBar.translateT(tmp[0]) + '</i></span><span class="cover"><i>' + drawBar.translateT(tmp[1]) + '</i><em></em></span><i class="gou"></i></div></li>';
                            break;
                        case 'PKTH':
                            var poker_trans = {
                                "黑桃": "poker_tao",
                                "红桃": "poker_xin",
                                "梅花": "poker_mei",
                                "方块": "poker_fang"
                            };
                            ballStr += '<li class="' + eval('poker_trans.' + nn) + '"><div zhuma="' + nn + '"><em></em><i class="gou"></i></div></li>';
                            break;
                        case 'PKTHS':
                            var poker_trans = {
                                "黑桃顺子": "poker_tao",
                                "红桃顺子": "poker_xin",
                                "梅花顺子": "poker_mei",
                                "方块顺子": "poker_fang"
                            };
                            ballStr += '<li class="' + eval('poker_trans.' + nn) + '"><div zhuma="' + nn + '"><em></em><span>顺子</span><i class="gou"></i></div></li>';
                            break;
                        case 'PKBX':
                            var poker_trans = {
                                "同花顺包选": "poker_ths",
                                "同花包选": "poker_th",
                                "顺子包选": "poker_sz",
                                "豹子包选": "poker_bz",
                                "对子包选": "poker_dz"
                            };
                            ballStr += '<li class="' + eval('poker_trans.' + nn) + '"><div zhuma="' + nn + '"><b>' + nn + '</b><p>&nbsp;</p><span class="hua"></span> <i class="gou"></i> </div></li>';
                            break;
                        case 'PKRX1':
                        case 'PKRX2':
                        case 'PKRX3':
                        case 'PKRX4':
                        case 'PKRX5':
                        case 'PKRX6':
                            ballStr += '<li><div zhuma="' + nn + '">' + drawBar.translateT(nn) + '<i class="gou"></i></div></li>';
                            break;
                        default:
                            ballStr += '<li>' + nn + "</li>"
                        }
                    }),
                    "定单双" === ps.curMethod.cname ? $.each(ps.curMethod.prize, function(e, t) {
                        prizeStr += '<li class="ballPrize_' + e + '"></li>'
                    }) : "猜中位" === ps.curMethod.cname && (prizeStr += "<li class=\"ballPrize1_1\"></li><li class=\"ballPrize1_2\"></li><li class=\"ballPrize1_3\"></li><li class=\"ballPrize1_4\"></li><li class=\"ballPrize1_3\"></li><li class=\"ballPrize1_2\"></li><li class=\"ballPrize1_1\"></li>");
                    var ballListName, prizeListName;
                    if ("猜中位" === ps.curMethod.cname ? (ballListName = 'ballList_czw',
                    prizeListName = 'prizeList_czw') : (ballListName = 'ballList',
                    prizeListName = 'prizeList'),
                    6 == ps.lotteryType && 'JSHZ' != ps.curMethod.name && (ballListName = 'ballList_k3no_square'),
                    6 != ps.lotteryType || 'JSSTTX' != ps.curMethod.name && 'JSSLTX' != ps.curMethod.name) {
                        if (7 == ps.lotteryType)
                            switch (ps.curMethod.name) {
                            case 'PKSZ':
                            case 'PKBZ':
                                ballListName = 'poker3';
                                break;
                            case 'PKDZ':
                                ballListName = 'poker3 dz';
                                break;
                            case 'PKBX':
                            case 'PKTHS':
                            case 'PKTH':
                                ballListName = 'pokerBig';
                                break;
                            case 'PKRX1':
                            case 'PKRX2':
                            case 'PKRX3':
                            case 'PKRX4':
                            case 'PKRX5':
                            case 'PKRX6':
                                ballListName = 'pokerRx';
                                break;
                            default:
                                ballStr += '<li>' + nn + "</li>"
                            }
                    } else
                        ballListName = 'ballList_k3no_sttx';
                    ballStr = '<li style="width:540px;"><ul class="' + ballListName + (/(BD|HZ)$/.test(ps.curMethod.name) ? " w400" : "") + '" id=field_' + i + ">" + ballStr + "</ul>" + ("" != prizeStr ? '<ul class="' + prizeListName + '">' + prizeStr + '</ul>' : "") + "</li>",
                    hzbdStr = '<li><ul class="BDHZinfo">' + hzbdStr + "</ul></li>";
                    var specialClass = "";
                    /(DXDS)$/.test(ps.curMethod.name) ? specialClass = ' DXDS-margin-left' : /(SDDDS)$/.test(ps.curMethod.name) ? specialClass = ' SDDDS-margin-left' : /(SDCZW)$/.test(ps.curMethod.name) && (specialClass = ' SDCZW-margin-left'),
                    6 != ps.lotteryType || 'JSSTTX' != ps.curMethod.name && 'JSSLTX' != ps.curMethod.name ? $('<div class="locate" id="locate_' + i + '"><ul class="lotteryNumber' + specialClass + '">' + (prop.prompt ? '<li class="areaPrefix">' + prop.prompt + "</li>" : "") + ballStr + "</ul></div>").appendTo("#selectArea") : $('<div class="locate" id="locate_' + i + '"><ul class="lotteryNumber k3">' + ballStr + "</ul></div>").appendTo("#selectArea"),
                    prop.has_filter_btn && (7 == ps.lotteryType ? ($(".lotteryNumber").first().append(filterBtn),
                    $('.allSelect').click(function() {
                        $(".lotteryNumber li ul li").addClass('ball_Selected'),
                        ballBar.computeSingle()
                    }),
                    $('.clearSelect').click(function() {
                        $(".lotteryNumber li ul li").removeClass('ball_Selected'),
                        ballBar.computeSingle()
                    })) : ($("#locate_" + i).find("ul").first().append(filterBtn),
                    "EXZUX" == ps.curMethod.name || ps.curMethod.name,
                    $("#locate_" + i).find("dd").click(function() {
                        switch ($(this).text()) {
                        case '全':
                            $('#field_' + i).children().addClass('ball_Selected');
                            break;
                        case '奇':
                            1 == ps.lotteryType || 4 == ps.lotteryType ? $('#field_' + i).children().removeClass('ball_Selected').parent().find(":odd").addClass('ball_Selected') : 2 == ps.lotteryType && $('#field_' + i).children().removeClass('ball_Selected').parent().find(":even").addClass('ball_Selected');
                            break;
                        case '偶':
                            1 == ps.lotteryType || 4 == ps.lotteryType ? $('#field_' + i).children().removeClass('ball_Selected').parent().find(":even").addClass('ball_Selected') : 2 == ps.lotteryType && $('#field_' + i).children().removeClass('ball_Selected').parent().find(":odd").addClass('ball_Selected');
                            break;
                        case '大':
                            $('#field_' + i).children().removeClass('ball_Selected').filter(function(e) {
                                return e >= 5
                            }).addClass('ball_Selected');
                            break;
                        case '小':
                            $('#field_' + i).children().removeClass('ball_Selected').filter(function(e) {
                                return e < 5
                            }).addClass('ball_Selected');
                            break;
                        case '清':
                            $('#field_' + i).children().removeClass('ball_Selected');
                            break;
                        case '质':
                            1 == ps.lotteryType || 4 == ps.lotteryType ? $('#field_' + i).children().removeClass('ball_Selected').filter(function(e) {
                                return -1 != $.inArray(e, [2, 3, 5, 7])
                            }).addClass('ball_Selected') : 2 == ps.lotteryType && $('#field_' + i).children().removeClass('ball_Selected').filter(function(e) {
                                return -1 != $.inArray(e, [1, 2, 4, 6, 10])
                            }).addClass('ball_Selected');
                            break;
                        case '合':
                            1 == ps.lotteryType || 4 == ps.lotteryType ? $('#field_' + i).children().removeClass('ball_Selected').filter(function(e) {
                                return -1 != $.inArray(e, [4, 6, 8, 9])
                            }).addClass('ball_Selected') : 2 == ps.lotteryType && $('#field_' + i).children().removeClass('ball_Selected').filter(function(e) {
                                return -1 != $.inArray(e, [3, 5, 7, 8, 9])
                            }).addClass('ball_Selected')
                        }
                        ballBar.computeSingle()
                    })));
                    var result = [];
                    result.length > 0 && $.each(result, function(e, t) {
                        $(t).appendTo('#selectArea')
                    })
                }),
                $(".ballList li").bind("click", ballBar.ball_Click),
                $(".ballList_czw li").bind("click", ballBar.ball_Click)
            },
            getAssisInfo: function(e) {
                var t = ""
                  , a = [];
                if (!$.isArray(ps.missHot.miss) || !$.isArray(ps.missHot.hot))
                    return [];
                var s = -1;
                switch (ps.curMethod.name) {
                case "QSZX":
                case "QSLX":
                case "QEZX":
                case "QELX":
                case "QSIZX":
                case "WXZX":
                case "WXLX":
                case "WXDW":
                case 'SXDW':
                case "SDQSZX":
                case "SDQEZX":
                    s = e - 1 + 0;
                    break;
                case "SIXZX":
                case "ZSZX":
                case "ZSLX":
                    s = e - 1 + 1;
                    break;
                case "SXZX":
                case "SXLX":
                    s = e - 1 + 2;
                    break;
                case "EXZX":
                case "EXLX":
                    s = e - 1 + 3;
                    break;
                case "YXZX":
                    s = e - 1 + 4
                }
                return s > -1 && ($.each(ps.missHot.miss[s], function(e, a) {
                    t += '<li class="yiLouNum">' + a + "</li>"
                }),
                t = '<div class="missDIV" id="missHot_' + e + '"><ul class="missHotNumber"><li class="missHotUnit">遗漏:</li><li><ul class="yiLouList" id=yiLouList_' + e + ">" + t + "</ul></li></ul></div>",
                a.push(t),
                t = "",
                $.each(ps.missHot.hot[s], function(e, a) {
                    t += '<li class="yiLouNum">' + a + "</li>"
                }),
                t = '<div class="hotDIV" id="missHot_' + e + '"><ul class="missHotNumber"><li class="missHotUnit">冷热:</li><li><ul class="yiLouList" id=yiLouList_' + e + ">" + t + "</ul></li></ul></div>",
                a.push(t)),
                a
            },
            ball_Click: function(e) {
                $(this).toggleClass("ball_Selected"),
                /\w+_(\d+)/.test($(this).parent().attr("id"));
                var t = RegExp.$1;
                $(this).parent().find(".ball_Selected").length > ps.curMethod.field_def[t].max_selected ? 1 == ps.curMethod.field_def[t].max_selected ? $(this).siblings(".ball_Selected").removeClass("ball_Selected") : ($(this).removeClass("ball_Selected"),
                parent.layer.alert("当前最多只能选择" + ps.curMethod.field_def[t].max_selected + "个号码", {
                    icon: 7
                })) : ('JSETDX' == ps.curMethod.name && $('#locate_' + (1 == t ? 2 : 1)).find(".ballList_k3no_square li").eq(parseInt($(this).text().substr(0, 1)) - 1).removeClass("ball_Selected"),
                ballBar.computeSingle())
            },
            computeSingle: function() {
                var e = [];
                $.each(ps.curMethod.field_def, function(t, a) {
                    var s = ""
                      , l = ps.curMethod.field_def[t].nums.split(" ");
                    $("#field_" + t + " li").each(function(e) {
                        $(this).hasClass("ball_Selected") && (2 == ps.lotteryType || ps.curMethod.field_def[t].max_selected > 10 || l[l.length - 1].length > 1 ? 7 == ps.lotteryType ? s += $(this).find('div').attr("zhuma") + "_" : s += $(this).text() + "_" : 7 == ps.lotteryType ? s += $(this).find('div').attr("zhuma") : s += $(this).text())
                    }),
                    -1 == s.indexOf("_") ? e.push(s) : e.push(s.substr(0, s.length - 1))
                });
                var t = isLegalCode(e);
                buyBar.updateSingle(t.singleNum),
                'WXDW' != ps.curMethod.name && 'REZX' != ps.curMethod.name && 'RSZX' != ps.curMethod.name && 'RSIZX' != ps.curMethod.name || $.each(e, function(t, a) {
                    '' == a && (e[t] = '-')
                });
                var a = e.join(",");
                return 'JSSTTX' == ps.curMethod.name ? a = '111_222_333_444_555_666' : 'JSSLTX' == ps.curMethod.name && (a = '123_234_345_456'),
                {
                    singleNum: t.singleNum,
                    isDup: t.isDup,
                    code: a
                }
            }
        }
          , initMissHotBar = function() {
            $("input[name=missHotBtn]").click(missHotBar.missHotBtn_Click),
            $('input[name=missHotBtn][value="1"]').click()
        }
          , missHotBar = {
            missHotBtn_Click: function() {
                "1" == $(this).val() ? ($("#selectArea .missDIV").removeClass("hidden"),
                $("#selectArea .hotDIV").addClass("hidden")) : ($("#selectArea .missDIV").addClass("hidden"),
                $("#selectArea .hotDIV").removeClass("hidden"))
            }
        }
          , initBuyBar = function() {
            ps.nextProjectCounter = 0,
            buyBar.removeAll(),
            $("#multiple").click(function() {
                this.focus(),
                this.select()
            }).blur(function() {
                '' != this.value && 0 != this.value || (this.value = 1)
            }).keyup(buyBar.checkMultiple).keyup(buyBar.updateTotalSingle),
            $(".xDel").live("click", function() {
                $(this).parent().remove(),
                buyBar.updateTotalSingle()
            }),
            $("#clearProjectBtn").click(buyBar.removeAll),
            $("#inputBtn").click(buyBar.inputBtn_Click),
            $("#selectCodeBtn").click(buyBar.selectCodeBtn_Click),
            $("#selectCodeBtnFast").click(buyBar.selectCodeBtnFast),
            $("#confirmBtn").click(function() {
                buyBar.confirmBtn_Click(0)
            }),
            $("#traceBtn").click(buyBar.traceBtn_Click),
            $(".selectRandomBtn").click(buyBar.selectRandomBtn_Click),
            $(".selectRandomBtn1").click(buyBar.selectRandomBtn_Click),
            $("#plusBtn").click(buyBar.plusBtn_Click),
            $("#minusBtn").click(buyBar.minusBtn_Click)
        }
          , Flag = 0
          , buyBar = {
            selectCodeBtnFast: function() {
                if (1 == (Flag += 1)) {
                    buyBar.selectCodeBtn_Click(),
                    buyBar.confirmBtn_Click(1);
                    var e = setInterval(function() {
                        0 == (Flag = 0) && clearInterval(e)
                    }, 1e3)
                }
            },
            plusBtn_Click: function() {
                var e = $("#multiple").val();
                $("#multiple").val(parseInt(e) + 1),
                buyBar.checkMultiple(),
                buyBar.updateTotalSingle()
            },
            minusBtn_Click: function() {
                var e = $("#multiple").val();
                parseInt(e) > 1 && ($("#multiple").val(e - 1),
                buyBar.checkMultiple(),
                buyBar.updateTotalSingle())
            },
            inputBtn_Click: function(e) {
                ps.curMethod = e.data,
                ballBar.showInput();
                var t = $(this)
                  , a = t.attr("pid");
                $("#" + a).find('.method').removeClass("method_selected"),
                t.addClass("method_selected"),
                $('#curMethod').text(ps.curMethod.cname),
                $("#methodDesc").text(ps.curMethod.description).hide(),
                $("#selectCodeBtn").addClass("selectCodeBtn_selected"),
                $(".selectRandomBtn").parent().show(),
                $("#selectArea").removeClass("N-selected"),
                buyBar.updateSingle(0),
                prizeBar.showPirze()
            },
            selectCodeBtn_Click: function() {
                if ($("#inputTA").length > 0) {
                    var allCodes = []
                      , str = $.trim($("#inputTA").val());
                    if (0 == str.length)
                        return !1;
                    if (1 == ps.lotteryType || 4 == ps.lotteryType) {
                        var arrs = str.split(/\s+|,|，|;|；/)
                          , arrsHHZX = []
                          , hhzxIds = [81, 594, 597, 591, 82, 88, 109, 110, 95, 108, 600, 603, 606, 128, 122, 612, 609, 195, 216, 230, 615, 235, 250, 351, 352, 358, 486, 479, 468];
                        if (hhzxIds.indexOf(ps.curMethod.method_id) >= 0) {
                            $.each(arrs, function(e) {
                                var t = arrs[e].split("");
                                t = t.sort(function(e, t) {
                                    return e - t
                                }),
                                arrsHHZX.push(t.join(""))
                            });
                            var arrs = [];
                            arrs = arrsHHZX
                        }
                        var arr = tool.uniqueArr(arrs);
                        if ("SXHHZX" == ps.curMethod.name || "ZSHHZX" == ps.curMethod.name || "QSHHZX" == ps.curMethod.name)
                            var re = eval("/^\\d{3}$/");
                        else
                            var re = eval("/^\\d{" + propLen(ps.curMethod.field_def) + "}$/");
                        if ('REZX' == ps.curMethod.name || 'RSZX' == ps.curMethod.name || 'RSIZX' == ps.curMethod.name) {
                            var position = [0, 0, 0, 0, 0]
                              , positionLength = 0;
                            $("input[name=rx]:checkbox").each(function() {
                                this.checked && (position[$(this).val()] = 1,
                                positionLength++)
                            });
                            var code, allCodesString = [];
                            for (var m in arr) {
                                if ((tmp = arr[m].split("")).length > positionLength)
                                    return parent.layer.alert("您输入的号码有误，请重新检查输入", {
                                        icon: 7
                                    }),
                                    !1;
                                var code = ["-", "-", "-", "-", "-"], tmpCode;
                                switch (ps.curMethod.name) {
                                case 'REZX':
                                    if (2 != tmp.length)
                                        return parent.layer.alert("您输入的号码有误，请重新检查输入", {
                                            icon: 7
                                        }),
                                        !1;
                                    for (var i = 0; i <= 3; i++)
                                        if (1 == position[i]) {
                                            code[i] = tmp[0];
                                            for (var j = i + 1; j <= 4; j++)
                                                1 == position[j] && (code[j] = tmp[1],
                                                allCodesString.push(code.toString()),
                                                code[j] = '-');
                                            code[i] = '-'
                                        }
                                    break;
                                case 'RSZX':
                                    if (3 != tmp.length)
                                        return parent.layer.alert("您输入的号码有误，请重新检查输入", {
                                            icon: 7
                                        }),
                                        !1;
                                    for (var i = 0; i <= 2; i++)
                                        if (1 == position[i]) {
                                            code[i] = tmp[0];
                                            for (var j = i + 1; j <= 3; j++)
                                                if (1 == position[j]) {
                                                    code[j] = tmp[1];
                                                    for (var k = j + 1; k <= 4; k++)
                                                        1 == position[k] && (code[k] = tmp[2],
                                                        allCodesString.push(code.toString()),
                                                        code[k] = '-');
                                                    code[j] = '-'
                                                }
                                            code[i] = '-'
                                        }
                                    break;
                                case 'RSIZX':
                                    if (4 != tmp.length)
                                        return parent.layer.alert("您输入的号码有误，请重新检查输入", {
                                            icon: 7
                                        }),
                                        !1;
                                    for (var g = 0; g <= 1; g++)
                                        if (1 == position[g]) {
                                            code[g] = tmp[0];
                                            for (var i = g + 1; i <= 2; i++)
                                                if (1 == position[i]) {
                                                    code[i] = tmp[1];
                                                    for (var j = i + 1; j <= 3; j++)
                                                        if (1 == position[j]) {
                                                            code[j] = tmp[2];
                                                            for (var k = j + 1; k <= 4; k++)
                                                                1 == position[k] && (code[k] = tmp[3],
                                                                allCodesString.push(code.toString()),
                                                                code[k] = '-');
                                                            code[j] = '-'
                                                        }
                                                    code[i] = '-'
                                                }
                                            code[g] = '-'
                                        }
                                }
                            }
                            for (n in allCodesString)
                                allCodes.push(allCodesString[n].split(","))
                        } else
                            for (var i in arr)
                                allCodes.push(arr[i].split(""))
                    } else if (2 == ps.lotteryType) {
                        var arrs = str.split(/,|，|\n|;|；/)
                          , re = /^[01]\d$/
                          , arr = tool.uniqueArr(arrs);
                        for (var i in arr) {
                            arr[i] = $.trim(rtrim($.trim(arr[i]), ","));
                            var tmp = arr[i].split(" ");
                            for (var i2 in tmp)
                                if (!re.test(tmp[i2]))
                                    return parent.layer.alert("您输入的号码有误，请重新检查输入", {
                                        icon: 7
                                    }),
                                    !1;
                            if (tmp.length != array_unique(tmp).length)
                                return parent.layer.alert("您输入的号码有重复，请重新检查输入", {
                                    icon: 7
                                }),
                                !1;
                            'SDQSZUX' == ps.curMethod.name || 'SDQEZUX' == ps.curMethod.name || /SDRX(\d+)/.test(ps.curMethod.name) ? allCodes.push([tmp.join("_")]) : allCodes.push(tmp)
                        }
                    }
                    var ob = {
                        singleNum: 1,
                        isDup: 0
                    }
                      , strPart1 = '<li><span class="width1" mid="' + ps.curMethod.method_id + '" mname="' + ps.curMethod.name + '">'
                      , strPart2 = ps.curMethod.cname + '</span><span class="width2">';
                    if (allCodes.length <= 1e3)
                        for (var i in allCodes) {
                            var ob = isLegalCode(allCodes[i])
                              , singleAmount = number_format(2 * ob.singleNum * ps.curMode, 3)
                              , strPart3 = '</span><span class="width3">' + ob.singleNum + '注</span><span class="width4">￥' + singleAmount + '</span><span class="xDel">X</span></li>';
                            if (ob.isDup)
                                return parent.layer.alert("您输入的号码有误，请重新检查输入!", {
                                    icon: 7
                                }),
                                !1;
                            ps.nextProjectCounter++,
                            $(strPart1 + strPart2 + allCodes[i].join(",") + strPart3).appendTo("#projectList")
                        }
                    else {
                        var allCodesStr = ''
                          , allProjectsStr = '';
                        for (var i in allCodes) {
                            allCodesStr && (allCodesStr += '|'),
                            allCodesStr += allCodes[i].join(",");
                            var ob = isLegalCode(allCodes[i]);
                            if (ob.isDup)
                                return parent.layer.alert("您输入的号码有误，请重新检查输入!", {
                                    icon: 7
                                }),
                                !1
                        }
                        var singleAmount = number_format(2 * allCodes.length * ps.curMode, 3)
                          , strPart3 = '</span><span class="width3">' + allCodes.length + '注</span><span class="width4">￥' + singleAmount + '</span><span class="xDel">X</span></li>';
                        ps.nextProjectCounter = allCodes.length,
                        allProjectsStr += strPart1 + strPart2 + allCodesStr + strPart3,
                        $(allProjectsStr).appendTo("#projectList")
                    }
                    buyBar.updateTotalSingle(),
                    $("#delTA").click()
                } else {
                    var ob = ballBar.computeSingle();
                    if (0 == ob.singleNum)
                        return !1;
                    ps.nextProjectCounter++;
                    var singleAmount = number_format(2 * ob.singleNum * ps.curMode, 3);
                    367 == ps.curMethod.method_id && (ob.code = '123_234_345_456'),
                    7 == ps.lotteryType && (ob.code = ob.code.replace(/T/g, '10')),
                    $('<li><span class="width1" mid="' + ps.curMethod.method_id + '" mname="' + ps.curMethod.name + '">' + ps.curMethod.cname + '</span><span class="width2">' + ob.code + '</span><span class="width3">' + ob.singleNum + '注</span><span class="width4">￥' + singleAmount + '</span><span class="xDel">X</span></li>').appendTo("#projectList"),
                    buyBar.updateTotalSingle(),
                    ballBar.reset()
                }
            },
            rxInputCodes: function(e, t) {
                for (var a = ['-', '-', '-', '-', '-'], s = e[0]; s <= e[e.length - 1]; s++)
                    a[s] = ''
            },
            removeAll: function() {
                $("#token").val(""),
                $("#projectList").empty(),
                ps.nextProjectCounter = 0,
                $("#totalSingleInfo input").val("1"),
                buyBar.updateTotalSingle()
            },
            updateSingle: function(e) {
                var t = number_format(2 * e * ps.curMode, 3);
                $("#betCount").text(e),
                $("#betAmount").text(t);
                var a = 0 == $('#projectList li').length ? 1 : $('#projectList li').length;
                if (e > 0) {
                    $("#selectCodeBtn").parent().addClass('selectCodeBtn_selected');
                    var s = $("#totalBetAmount").text()
                      , l = (i = $('#curPrizeSpan').find("option:selected").text()).split('/')[0];
                    $("#totalWin").text(number_format(l * a * $("#multiple").val() - s - t, 3))
                } else {
                    $("#selectCodeBtn").parent().removeClass('selectCodeBtn_selected');
                    var s = $("#totalBetAmount").text()
                      , i = $('#curPrizeSpan').find("option:selected").text()
                      , l = i.split('/')[0];
                    $("#totalWin").text(number_format(l * a * $("#multiple").val() - s, 3))
                }
            },
            updateTotalSingle: function() {
                var e = 0;
                $("#projectList").children("li").each(function(t) {
                    var a = $(this).children();
                    e += parseInt(a.eq(2).text()),
                    a.eq(3).text("￥" + number_format(2 * parseInt(a.eq(2).text()) * $("#multiple").val() * ps.curMode, 3))
                }),
                e > 0 ? $("#confirmBtn").addClass('CantapCodeBtn_selected') : $("#confirmBtn").removeClass('CantapCodeBtn_selected');
                var t = 0 == $('#projectList li').length ? 1 : $('#projectList li').length;
                $("#totalBetCount").text(e);
                var a = number_format(2 * e * $("#multiple").val() * ps.curMode, 3);
                $("#totalBetAmount").text(a);
                var s = $('#curPrizeSpan').find("option:selected").text().split('/')[0];
                $("#totalWin").text(number_format(s * t * $("#multiple").val() - a, 3))
            },
            checkMultiple: function() {
                var e = $("#multiple").val().replace(/^0|[^\d]/g, '');
                $("#multiple").val(e);
                return !(parseInt(e) > 5e4) || (parent.layer.alert("请输入正确的倍数，最大为50000倍", {
                    icon: 7
                }),
                $("#multiple").val(5e4),
                !0)
            },
            createBuyLock: function() {
                if ($('#buyLock').length <= 0) {
                    var e = document.body.firstChild
                      , t = document.createElement("input");
                    t.setAttribute('id', 'buyLock'),
                    t.setAttribute('type', 'hidden'),
                    t.setAttribute('value', '1'),
                    document.body.insertBefore(t, e)
                }
                return '1' == $('#buyLock').val() ? ($('#buyLock').val(2),
                'go') : 'stop'
            },
            resetBuyLock: function() {
                $('#buyLock').val(1)
            },
            confirmBtn_Click: function(e) {
                var t = {}
                  , a = '';
                if ($("#projectList").children("li").each(function(e) {
                    $(this).children().eq(0).attr("mname");
                    t[$(this).children().eq(0).attr("mid")] || (t[$(this).children().eq(0).attr("mid")] = {}),
                    t[$(this).children().eq(0).attr("mid")][e] = $(this).children().eq(1).text()
                }),
                $.each(t, function(e, t) {
                    a += e + ':',
                    $.each(t, function(e, t) {
                        a += t + '|'
                    }),
                    a = rtrim(a, '|'),
                    a += '#'
                }),
                a = rtrim(a, '#'),
                !ps.canBuy)
                    return parent.layer.alert("该期已截止购买", {
                        icon: 7
                    }),
                    !1;
                if (0 == a.length)
                    return parent.layer.alert("请先选择号码再投注", {
                        icon: 7
                    }),
                    !1;
                $("#token").val(getRandChar(32));
                var s = $("#totalBetAmount").text()
                  , l = $("#totalBetCount").text()
                  , i = $("#totalSingleInfo input").val();
                if (!/^[1-9]*[1-9][0-9]*$/.test(i))
                    return parent.layer.alert("请输入正确的倍数，最大为50000倍", {
                        icon: 7
                    }),
                    $("#multiple").val("1"),
                    !1;
                var r = 0;
                if (0 == e) {
                    var n = 1 == ps.curMode ? "2元" : .5 == ps.curMode ? "1元" : .1 == ps.curMode ? "2角" : .05 == ps.curMode ? "1角" : .01 == ps.curMode ? "分" : "厘"
                      , o = '<div id="buy_message">请确认以下投注内容：<br>************************<br>单倍注数：' + l + "注<br>总 金 额：￥" + s + "<br>模&nbsp;&nbsp;式：" + n + "模式<br>倍&nbsp;&nbsp;数：" + i + "倍<br>************************<br></div>";
                    parent.layer.confirm(o, {
                        icon: 7
                    }, function(e) {
                        if ('stop' == buyBar.createBuyLock())
                            return !1;
                        if (parent.$('.xubox_botton').empty(),
                        parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),
                        7 == ps.lotteryType && (a = a.replace(/10/g, 'T')),
                        1 == (r += 1)) {
                            $.post("?c=game&a=play", {
                                op: "buy",
                                lotteryId: ps.lotteryId,
                                issue: ps.curIssueInfo.issue,
                                curRebate: ps.rebateGapList.get(ps.curPrizeIndex).rebate,
                                modes: ps.curMode,
                                codes: a,
                                multiple: $("#totalSingleInfo input").val(),
                                token: $("#token").val()
                            }, function(t) {
                                if (0 == t.errno) {
                                    drawBar.todayBuyBtnNew_Click(),
                                    buyBar.removeAll();
                                    var a = '<div id="buy_success_message">购买成功!<br>************************<br>订单编号：' + t.pkgnum + "<br>投注期号：" + ps.curIssueInfo.issue + "<br>投注总额：￥" + s + "<br>模&nbsp;&nbsp;式：" + n + "模式<br>倍&nbsp;&nbsp;数：" + i + "倍<br>************************<br></div>";
                                    parent.layer.close(e),
                                    parent.layer.alert(a, {
                                        icon: 1
                                    }),
                                    parent.$('.xubox_yes').focus(),
                                    parent.$('.xubox_yes').one('keyup', function(e) {
                                        var t = e.keyCode ? e.keyCode : e.which;
                                        32 == t && parent.$('.xubox_yes').trigger("click"),
                                        27 == t && parent.$('.xubox_no').trigger("click")
                                    })
                                } else
                                    65534 == t.errno || (parent.layer.close(e),
                                    parent.layer.alert("购买失败:" + t.errstr, {
                                        icon: 2
                                    }),
                                    console.log("错误代码:" + t.errno));
                                buyBar.resetBuyLock(),
                                showBalance()
                            }, "json").fail(function(t) {
                                buyBar.resetBuyLock(),
                                parent.layer.close(e),
                                parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。", {
                                    icon: 2
                                })
                            });
                            var t = setInterval(function() {
                                0 == (r = 0) && clearInterval(t)
                            }, 5e3)
                        }
                    })
                } else {
                    if ('stop' == buyBar.createBuyLock())
                        return !1;
                    parent.$('.xubox_botton').empty(),
                    parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),
                    7 == ps.lotteryType && (a = a.replace(/10/g, 'T')),
                    $.post("?c=game&a=play", {
                        op: "buy",
                        lotteryId: ps.lotteryId,
                        issue: ps.curIssueInfo.issue,
                        curRebate: ps.rebateGapList.get(ps.curPrizeIndex).rebate,
                        modes: ps.curMode,
                        codes: a,
                        multiple: $("#totalSingleInfo input").val(),
                        token: $("#token").val()
                    }, function(e) {
                        if (0 == e.errno) {
                            drawBar.todayBuyBtnNew_Click(),
                            buyBar.removeAll();
                            var t = '<div id="buy_success_message">购买成功!<br>************************<br>订单编号：' + e.pkgnum + "<br>投注期号：" + ps.curIssueInfo.issue + "<br>投注总额：￥" + s + "<br>模&nbsp;&nbsp;式：" + (1 == ps.curMode ? "2元" : .5 == ps.curMode ? "1元" : .1 == ps.curMode ? "2角" : .05 == ps.curMode ? "1角" : .01 == ps.curMode ? "分" : "厘") + "模式<br>倍&nbsp;&nbsp;数：" + i + "倍<br>************************<br></div>";
                            parent.layer.alert(t, {
                                icon: 1
                            }),
                            parent.$('.xubox_yes').focus(),
                            parent.$('.xubox_yes').one('keyup', function(e) {
                                var t = e.keyCode ? e.keyCode : e.which;
                                32 == t && parent.$('.xubox_yes').trigger("click"),
                                27 == t && parent.$('.xubox_no').trigger("click")
                            })
                        } else
                            65534 == e.errno || (parent.layer.alert("购买失败:" + e.errstr, {
                                icon: 2
                            }),
                            console.log("错误代码:" + e.errno));
                        buyBar.resetBuyLock(),
                        showBalance()
                    }, "json").fail(function(e) {
                        buyBar.resetBuyLock(),
                        parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。", {
                            icon: 2
                        })
                    })
                }
                parent.$('.xubox_yes').focus(),
                parent.$('.xubox_yes').one('keyup', function(e) {
                    var t = e.keyCode ? e.keyCode : e.which;
                    32 == t && parent.$('.xubox_yes').trigger("click"),
                    27 == t && parent.$('.xubox_no').trigger("click")
                })
            },
            traceBtn_Click: function() {
                if ($("#traceBtn").attr("mark", 1),
                0 == $("#projectList li").length)
                    return parent.layer.alert("请先选择投注号码", {
                        icon: 7
                    }),
                    !1;
                $("#traceBtn").attr('disabled', "true");
                var e = [];
                if ($("#projectList li").each(function(t) {
                    -1 == $.inArray($(this).find("span:first").attr("mid"), e) && e.push($(this).find("span:first").attr("mid"))
                }),
                $(document).bind("click", function(e) {
                    0 == $(e.target).closest(".multipleNumDropdown").length && 0 == $(e.target).closest(".multipleNumValue").length && $(".multipleNumValue").css("display", "none")
                }),
                'undefined' == $("#traceBtn").attr('backLock') && $("#traceBtn").attr('backLock', '1'),
                '2' == $("#traceBtn").attr('backLock'))
                    return !1;
                $("#traceBtn").attr('backLock', "2"),
                $.ajax({
                    url: "?c=game&a=play",
                    type: "POST",
                    data: {
                        op: "getTracePage",
                        lotteryId: ps.lotteryId,
                        mids: e.join(",")
                    },
                    cache: !1,
                    dataType: "json",
                    timeout: 3e4,
                    success: function(t) {
                        if ($("#traceBtn").removeAttr("disabled"),
                        $("#traceBtn").attr('backLock', '1'),
                        0 == t.errno) {
                            ps.canTraceIssues = t.issues,
                            ps.traceMethodPrize = t.prize,
                            ps.tracePrizeLimit = t.prizeLimit;
                            var a = traceFunc.showTracePage($('#traceHtml'))
                              , s = [250, 251, 360, 368, 28, 56, 101, 202, 298, 34, 57, 102, 203, 304, 4, 52, 106, 193, 274, 5, 53, 107, 194, 275, 81, 108, 109, 195, 351, 42, 75, 115, 219, 312, 43, 76, 116, 220, 313, 38, 71, 120, 214, 308, 39, 72, 121, 215, 309, 82, 110, 122, 216, 352, 86, 93, 126, 228, 356, 87, 94, 127, 229, 357, 88, 95, 128, 230, 358, 47, 78, 141, 222, 317, 235, 236, 386, 25, 155, 173, 189, 24, 154, 172, 188];
                            0 != t.prize && 1 == e.length && -1 == $.inArray(parseInt(ps.curMethod.method_id), s) || $("#multipleStyle2").attr("disabled", !0),
                            $("input[name=multipleStyle]").click(traceFunc.multipleStyle_Click),
                            $("#confirmTraceBtn").click(function() {
                                traceFunc.confirmTraceBtn_Click() && layer.close(a)
                            }),
                            $("#cancelTraceBtn").click(function() {
                                traceFunc.cancelTraceBtn_Click(),
                                layer.close(a)
                            }),
                            $("#startIssue").change(traceFunc.startIssue_Change),
                            $("#traceNum").click(function() {
                                this.focus(),
                                this.select()
                            }).keyup(buyBar.checkMultiple).keyup(traceFunc.traceNum_Keyup),
                            $(".multipleNumDropdown").mouseover(function() {
                                $(this).addClass('multipleNumDropdownSelected')
                            }).mouseout(function() {
                                $(this).removeClass('multipleNumDropdownSelected')
                            }).unbind("click").click(function() {
                                $(this).parent().find('.multipleNumValue').toggle()
                            }),
                            $(".multipleNumValue li").mousemove(function() {
                                $(this).addClass('multipleNumValueSelected')
                            }).mouseout(function() {
                                $(this).removeClass('multipleNumValueSelected')
                            }).click(function() {
                                var e = $(this).parent().siblings('.zhuiz_number_e2');
                                e.val(parseInt($(this).text())),
                                $.proxy(buyBar.checkMultiple, e.get(0))(),
                                'style1BodyMultiple' == e.attr('id') ? ($('.style1BodyMultiple').val(e.val()).each(function() {
                                    $.proxy(traceFunc.style1BodyMultiple_Keyup, $(this).get(0))()
                                }),
                                traceFunc.updateTotalMoney()) : 'traceNum' == e.attr('id') && $.proxy(traceFunc.traceNum_Keyup, e.get(0))(),
                                $(this).parent().slideUp('fast')
                            }),
                            $('#style1BodyMultiple').click(function() {
                                this.focus(),
                                this.select()
                            }).keyup(buyBar.checkMultiple).keyup(function() {
                                isNaN(parseInt($(this).val())) && $(this).val("1"),
                                $('.style1BodyMultiple').val($(this).val()).each(function() {
                                    $.proxy(traceFunc.style1BodyMultiple_Keyup, $(this).get(0))()
                                }),
                                traceFunc.updateTotalMoney()
                            }),
                            $('#checkAll').click(function() {
                                $(this).is(':checked') ? $('.checkbox input[type=checkbox]').attr('checked', !0).parent().parent().css('color', '') : $('.checkbox input[type=checkbox]').attr('checked', !1).parent().parent().css('color', '#ccc'),
                                traceFunc.updateTotalMoney()
                            }),
                            $('.checkbox input[type=checkbox]').live('click', function() {
                                if ('checkAll' != $(this).attr('id')) {
                                    $(this).is(':checked') ? $(this).parent().parent().css('color', '') : $(this).parent().parent().css('color', '#ccc');
                                    var e = $(this).parent().parent().index();
                                    $.proxy(traceFunc.style1BodyMultiple_Keyup, $('#style1BodyMultiple_' + e).get(0))(),
                                    traceFunc.updateTotalMoney()
                                }
                            }),
                            $("#singleNum").text($("#totalBetCount").text()),
                            $("#issuesNum2").text("1"),
                            $("#multipleStyle1").click(),
                            traceFunc.updateTotalMoney(),
                            runTime.traceRemainTimer = window.setInterval(traceFunc.traceRemain_Timer_Handle, 1e3)
                        } else
                            alert(t.errstr)
                    },
                    error: function(e, t, a) {
                        $("#traceBtn").removeAttr("disabled"),
                        $("#traceBtn").attr('backLock', '1'),
                        -1 != a.indexOf("a=logout") || -1 != a.indexOf("a=login") ? (alert("您已经退出，请重新登录"),
                        window.location.href = "?a=logout") : alert("操作超时，请刷新页面.")
                    }
                })
            },
            selectRandom: function() {
                var e, t, a = propLen(ps.curMethod.field_def), s = {}, l = [];
                switch (ps.curMethod.name) {
                case 'WXDW':
                    s.WXDW = 1;
                case 'REZX':
                    s.REZX = 2;
                case 'RSZX':
                    s.RSZX = 3;
                    for (p = 0; p < a; p++)
                        l[p] = "-";
                    for (var i = [], r = 1; r <= s[ps.curMethod.name]; r++) {
                        var n = Math.floor(Math.random() * a + 1)
                          , o = !1;
                        for (var c in i)
                            if (i[c] === n) {
                                o = !0;
                                break
                            }
                        if (o)
                            r--;
                        else {
                            i.push(n),
                            e = parseInt(ps.curMethod.field_def[r].max_selected),
                            t = Math.floor(Math.random() * e);
                            y = (f = ps.curMethod.field_def[r].nums.split(" "))[t];
                            l[n - 1] = y
                        }
                    }
                    break;
                case 'RSIZX':
                    s.RSIZX = 4;
                    for (var p = 0; p < a; p++)
                        l[p] = "-";
                    for (var i = [], r = 1; r <= s[ps.curMethod.name]; r++) {
                        n = Math.floor(Math.random() * a + 1);
                        o = !1;
                        for (var c in i)
                            if (i[c] === n) {
                                o = !0;
                                break
                            }
                        if (o)
                            r--;
                        else {
                            i.push(n),
                            e = parseInt(ps.curMethod.field_def[r].max_selected),
                            t = Math.floor(Math.random() * e);
                            y = (f = ps.curMethod.field_def[r].nums.split(" "))[t];
                            l[n - 1] = y
                        }
                    }
                    break;
                case 'EXZUX':
                    s.EXZUX = [2];
                case 'SXZS':
                    s.SXZS = [2];
                case 'SXZL':
                    s.SXZL = [3];
                case 'QEZUX':
                    s.QEZUX = [2];
                case 'QSZS':
                    s.QSZS = [2];
                case 'QSZL':
                    s.QSZL = [3];
                case "ZSZS":
                    s.ZSZS = [2];
                case "ZSZL":
                    s.ZSZL = [3];
                case 'ZUX24':
                    s.ZUX24 = [4];
                case 'ZUX12':
                    s.ZUX12 = [1, 2];
                case 'ZUX6':
                    s.ZUX6 = [2];
                case 'ZUX4':
                    s.ZUX4 = [1, 1];
                case 'ZUX120':
                    s.ZUX120 = [5];
                case 'ZUX60':
                    s.ZUX60 = [1, 3];
                case 'ZUX30':
                    s.ZUX30 = [2, 1];
                case 'ZUX20':
                    s.ZUX20 = [1, 2];
                case 'ZUX10':
                    s.ZUX10 = [1, 1];
                case 'ZUX5':
                    s.ZUX5 = [1, 1];
                case 'QSEMBDW':
                    s.QSEMBDW = [2];
                case 'ZSEMBDW':
                    s.ZSEMBDW = [2];
                case 'EMBDW':
                    s.EMBDW = [2];
                case 'SXEMBDW':
                    s.SXEMBDW = [2];
                case 'WXEMBDW':
                    s.WXEMBDW = [2];
                case 'WXSMBDW':
                    s.WXSMBDW = [3];
                    for (var d = [], r = 1; r <= a; r++) {
                        var u = []
                          , h = "";
                        e = parseInt(ps.curMethod.field_def[r].max_selected);
                        for (var m = 1; m <= s[ps.curMethod.name][r - 1]; m++) {
                            o = !1;
                            t = Math.floor(Math.random() * e);
                            for (var c in d)
                                if (d[c] === t) {
                                    o = !0;
                                    break
                                }
                            o ? m-- : (d.push(t),
                            u.push(t),
                            h = u.sort().join(''))
                        }
                        l.push(h)
                    }
                    break;
                default:
                    for (r = 1; r <= a; r++) {
                        e = parseInt(ps.curMethod.field_def[r].max_selected),
                        t = Math.floor(Math.random() * e);
                        var f = ps.curMethod.field_def[r].nums.split(" ")
                          , y = f[t];
                        l.push(y)
                    }
                }
                var b = isLegalCode(l)
                  , v = l.join(",");
                if (0 == b.singleNum)
                    return !1;
                ps.nextProjectCounter++;
                var g = number_format(2 * b.singleNum * ps.curMode, 3);
                $('<li><span class="width1" mid="' + ps.curMethod.method_id + '" mname="' + ps.curMethod.name + '">' + ps.curMethod.cname + '</span><span class="width2">' + v + '</span><span class="width3">' + b.singleNum + '注</span><span class="width4">￥' + g + '</span><span class="xDel">X</span></li>').appendTo("#projectList"),
                buyBar.updateTotalSingle()
            },
            selectRandomBtn_Click: function() {
                $(this).attr('disabled', 'true');
                var e, t = $(this).attr('num');
                for (e = 1; e <= t; e++)
                    buyBar.selectRandom();
                $(this).removeAttr('disabled')
            }
        }
          , traceFunc = {
            multipleStyle_Click: function() {
                $("#startIssue").get(0).selectedIndex = 0,
                $("#traceNum").val(1),
                $("#style1BodyMultiple").val(1),
                1 == $(this).val() ? ($(".style1BodyMultiple").live("click", function() {
                    this.focus(),
                    this.select()
                }).live("keyup", buyBar.checkMultiple).live("keyup", traceFunc.style1BodyMultiple_Keyup),
                traceFunc.updateStyle1(),
                $(".multipleNum").eq(0).show(),
                $("#multipleStyle1DIV").show(),
                $("#multipleStyle2DIV").hide()) : ($("#startMultiple").click(function() {
                    this.focus(),
                    this.select()
                }),
                $("#beitouToolSmainbtzk input").click(function() {
                    $(this).parent().click()
                }).focus(function() {
                    this.select()
                }),
                $("#beitouToolSmainbtzk li").click(function() {
                    $(this).addClass("checked").siblings().removeClass("checked"),
                    $(this).find("input[name=profitStyle]").attr("checked", !0)
                }),
                $(".multipleNum").eq(0).hide(),
                $("#generalPlanBtn").click(traceFunc.generalPlanBtn_Click),
                $("#issuesNum2").text("1"),
                $("#traceTotalAmount").text(number_format(2 * parseInt($("#singleNum").text()) * ps.curMode, 3)),
                $("#style2Body").empty(),
                $("#startMultiple").val("1"),
                $("input[name=totalProfitRate]").val("10"),
                $("input[name=first5Rate]").val("5"),
                $("input[name=first5RateValue]").val("10"),
                $("input[name=laterRateValue]").val("5"),
                $("input[name=totalProfit]").val("100"),
                $("input[name=first5Profit]").val("5"),
                $("input[name=first5ProfitValue]").val("100"),
                $("input[name=laterProfitValue]").val("50"),
                $("#beitouToolSmainbtzk li:first").click(),
                $("#multipleStyle1DIV").hide(),
                $("#multipleStyle2DIV").show())
            },
            startIssue_Change: function() {
                "1" == $("input[name=multipleStyle]:checked").val() ? traceFunc.updateStyle1() : traceFunc.generalPlanBtn_Click()
            },
            traceNum_Keyup: function() {
                "1" == $("input[name=multipleStyle]:checked").val() && traceFunc.updateStyle1()
            },
            traceRemain_Timer_Handle: function() {
                var e = subTime(ps.curRemainTime);
                if (ps.curRemainTime > 0)
                    $("#remainTimerLabel").text(e.hour + ":" + e.minute + ":" + e.second),
                    $("#traceBtn").attr("mark", 0);
                else {
                    clearInterval(runTime.traceRemainTimer);
                    var t = subTime(ps.curWaitOpenTime);
                    if ($("#remainTimerLabel").text(t.hour + ":" + t.minute + ":" + t.second),
                    runTime.traceWaitOpenTimer = window.setInterval(traceFunc.traceWaitOpen_Timer_Handle, 100),
                    layer.alert("第" + ps.curIssueInfo.issue + "期投注时间已结束，投注内容将进入到下一期！", {
                        icon: 7
                    }),
                    1 != $("#traceBtn").attr("mark"))
                        if ($("#startIssue").children(":first").remove(),
                        $("#startIssue").children(":first").text($("#startIssue").children(":first").text() + "(当前期)"),
                        "1" == $("input[name=multipleStyle]:checked").val()) {
                            var a = [];
                            $(".style1BodyMultiple").each(function() {
                                a.push(this.value)
                            }),
                            traceFunc.updateStyle1(),
                            $(".style1BodyMultiple").each(function() {
                                this.value = a.pop()
                            })
                        } else
                            $("#style2Body li").length > 0 && traceFunc.generalPlanBtn_Click()
                }
            },
            traceWaitOpen_Timer_Handle: function() {
                var e = subTime(ps.curWaitOpenTime);
                $("#remainTimerLabel").text(e.hour + ":" + e.minute + ":" + e.second),
                ps.curWaitOpenTime < 0 && (clearInterval(runTime.traceWaitOpenTimer),
                runTime.traceRemainTimer = window.setInterval(traceFunc.traceRemain_Timer_Handle, 1e3))
            },
            style1BodyMultiple_Keyup: function() {
                var e = parseInt($(this).val());
                (isNaN(e) || e < 1 || e > 99999) && (e = 1),
                /\w+_(\d+)/.test($(this).attr("id"));
                var t = RegExp.$1;
                if (0 == t)
                    l = 0;
                else {
                    for (var a, s = t - 1; s >= 0; s--)
                        if ($('#check_' + s).is(':checked')) {
                            a = s;
                            break
                        }
                    var l = parseFloat($("#totalMoney_" + a).text())
                }
                $("#style1BodyMultiple_" + t).val(e);
                var i = parseInt($("#singleNum").text()) * e * 2 * ps.curMode;
                for ($("#curMoney_" + t).text(number_format(i, 3)); t <= $("#style1Body li").length; )
                    $('#check_' + t).is(':checked') && (l += parseFloat($("#curMoney_" + t).text()),
                    $("#totalMoney_" + t).text(number_format(l, 3))),
                    t++;
                traceFunc.updateTotalMoney()
            },
            updateStyle1: function() {
                var e = -1;
                if ($.each(ps.canTraceIssues, function(t, a) {
                    a == $("#startIssue").val() && (e = t)
                }),
                -1 != e) {
                    isNaN(parseInt($("#traceNum").val())) && $("#traceNum").val("1"),
                    $('#style1BodyMultiple').val("1");
                    var t = ps.canTraceIssues.slice(e, e + parseInt($("#traceNum").val()));
                    t.length < $("#traceNum").val() && (layer.alert("最多只能追" + t.length + "期", {
                        icon: 7
                    }),
                    $("#traceNum").val(t.length)),
                    $("#style1Body").empty();
                    var a, s = 0;
                    $('#checkAll').attr('checked', !0),
                    $.each(t, function(e, t) {
                        a = 2 * parseInt($("#singleNum").text()) * ps.curMode,
                        s += a;
                        var l = '<li id="traceIssueLI_' + e + '"><span class="checkbox"><input type="checkbox" id="check_' + e + '" checked /></span><span id="traceIssue_' + e + '">' + t + '</span><span><input type="text" value="1" id="style1BodyMultiple_' + e + '" class="beitouToolsinput style1BodyMultiple" maxlength="5" /></span><span id=curMoney_' + e + ">" + number_format(a, 3) + "</span><span id=totalMoney_" + e + ">" + number_format(s, 3) + "</span></li>";
                        $("#style1Body").append(l),
                        $(".style1BodyMultiple").bind("click", function() {
                            this.focus(),
                            this.select()
                        }).bind("keyup", buyBar.checkMultiple).bind("keyup", traceFunc.style1BodyMultiple_Keyup)
                    }),
                    traceFunc.updateTotalMoney()
                }
            },
            confirmTraceBtn_Click: function() {
                var e, t, a, s, l, i;
                if ($("#projectList").children("li").each(function(r) {
                    e = $(this).children(),
                    s = e.eq(0).attr("mid"),
                    l = e.eq(1).text(),
                    i = !1,
                    a || (a = s,
                    t = s + ":",
                    i = !0),
                    a != s ? (t += "#" + s + ":",
                    a = s,
                    t += l) : t += 1 == i ? l : "|" + l
                }),
                !ps.canBuy)
                    return parent.layer.alert("该期已截止购买", {
                        icon: 7
                    }),
                    !1;
                if (0 == t.length)
                    return parent.layer.alert("请先选择号码再投注", {
                        icon: 7
                    }),
                    !1;
                var r = [];
                if ("1" == $("input[name=multipleStyle]:checked").val() ? $("#style1Body li").each(function(e) {
                    if ($(this).find("input[type=checkbox]").is(':checked')) {
                        var t = $(this).find("span:eq(1)").text()
                          , a = $(this).find("input[type=text]").val();
                        r.push({
                            issue: t,
                            multiple: a
                        })
                    }
                }) : $("#style2Body li").each(function(e) {
                    var t = $(this).find("span:eq(0)").text()
                      , a = $(this).find("span:eq(1)").text();
                    r.push({
                        issue: t,
                        multiple: a
                    })
                }),
                !r || r.length <= 0)
                    return parent.layer.alert("追号的期数不能为空", {
                        icon: 7
                    }),
                    !1;
                $("#token").val(getRandChar(32));
                var n = $("#traceTotalAmount").text()
                  , o = $("input[name=stopOnWin]").attr("checked") ? 1 : 0
                  , c = '<div id="buy_message">请确认以下投注内容：<br>************************<br>是否追号：是<br>单倍注数：' + $("#totalBetCount").text() + "注<br>总 金 额：￥" + n + "<br>超始期号：" + r[0].issue + "<br>追号期数：" + r.length + "<br>模&nbsp;&nbsp;式：" + (1 == ps.curMode ? "2元" : .5 == ps.curMode ? "1元" : .1 == ps.curMode ? "2角" : .05 == ps.curMode ? "1角" : .01 == ps.curMode ? "分" : "厘") + "模式<br>************************<br></div>";
                return traceFunc.destroyTracePage(),
                parent.layer.confirm(c, {
                    icon: 7
                }, function(e) {
                    if ('stop' == buyBar.createBuyLock())
                        return !1;
                    7 == ps.lotteryType && (t = t.replace(/10/g, 'T')),
                    $.post("?c=game&a=play", {
                        op: "buy",
                        lotteryId: ps.lotteryId,
                        issue: ps.curIssueInfo.issue,
                        curRebate: ps.rebateGapList.get(ps.curPrizeIndex).rebate,
                        modes: ps.curMode,
                        codes: t,
                        traceData: r,
                        stopOnWin: o,
                        token: $("#token").val()
                    }, function(t) {
                        if (0 == t.errno) {
                            buyBar.removeAll(),
                            drawBar.todayBuyBtnNew_Click();
                            var a = '<div id="buy_success_message">追号订单成功!<br>************************<br>订单编号：' + t.pkgnum + "<br>起始期号：" + r[0].issue + "<br>追号期数：" + r.length + "<br>追号总额：￥" + n + "<br>模&nbsp;&nbsp;式：" + (1 == ps.curMode ? "2元" : .5 == ps.curMode ? "1元" : .1 == ps.curMode ? "2角" : .05 == ps.curMode ? "1角" : .01 == ps.curMode ? "分" : "厘") + "模式<br>************************<br></div>";
                            parent.layer.close(e),
                            parent.layer.alert(a, {
                                icon: 1
                            }),
                            parent.$('.xubox_yes').focus(),
                            parent.$('.xubox_yes').one('keyup', function(e) {
                                var t = e.keyCode ? e.keyCode : e.which;
                                32 == t && parent.$('.xubox_yes').trigger("click"),
                                27 == t && parent.$('.xubox_no').trigger("click")
                            })
                        } else
                            parent.layer.close(e),
                            parent.layer.alert("追号失败:" + t.errstr, {
                                icon: 2
                            });
                        buyBar.resetBuyLock()
                    }, "json").fail(function(t) {
                        buyBar.resetBuyLock(),
                        parent.layer.close(e),
                        layer.alert("网络异常，请在“游戏记录-追号记录”中确认该订单是否提交成功。", {
                            icon: 2
                        })
                    }),
                    parent.$('.xubox_botton').empty(),
                    parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>')
                }),
                parent.$('.xubox_yes').focus(),
                parent.$('.xubox_yes').one('keyup', function(e) {
                    var t = e.keyCode ? e.keyCode : e.which;
                    32 == t && parent.$('.xubox_yes').trigger("click"),
                    27 == t && parent.$('.xubox_no').trigger("click")
                }),
                !0
            },
            cancelTraceBtn_Click: function() {
                traceFunc.destroyTracePage()
            },
            showTracePage: function(e) {
                var t = layer.open({
                    type: 1,
                    title: '追号管理',
                    offset: ['50px', ''],
                    area: ['700px', 'auto'],
                    content: e,
                    success: function(e) {
                        var t = '';
                        $.each(ps.canTraceIssues, function(e, a) {
                            t += '<option value="' + a + '">' + a + '期</option>'
                        }),
                        $("#startIssue").html(t).children(":first").text($("#startIssue").children(":first").text() + "(当前期)"),
                        $('#maxTraceCount').html(ps.canTraceIssues.length)
                    },
                    close: traceFunc.cancelTraceBtn_Click
                });
                return $(document).one('keyup', function(e) {
                    27 == (e.keyCode ? e.keyCode : e.which) && (traceFunc.cancelTraceBtn_Click(),
                    layer.close(t))
                }),
                t
            },
            destroyTracePage: function() {
                clearInterval(runTime.traceRemainTimer),
                clearInterval(runTime.traceWaitOpenTimer)
            },
            updateTotalMoney: function() {
                var e = 0;
                "1" == $("input[name=multipleStyle]:checked").val() ? ($("#style1Body li").each(function(t) {
                    $(this).find("input[type=checkbox]").is(':checked') && (e += parseInt($(this).find("input[type=text]").val()))
                }),
                $("#issuesNum2").text($("#style1Body li input[type=checkbox]:checked").length)) : ($("#style2Body li").each(function(t) {
                    e += parseInt($(this).find("span:eq(1)").text())
                }),
                $("#issuesNum2").text($("#style2Body li").length)),
                $("#traceTotalAmount").text(number_format(parseInt($("#singleNum").text()) * e * 2 * ps.curMode, 3))
            },
            generalPlanBtn_Click: function() {
                var e = function(e, t, a, s, l) {
                    if (e = isNaN(parseInt(e)) ? -1 : parseInt(e),
                    t = isNaN(parseInt(t)) ? -1 : parseInt(t),
                    a = isNaN(parseFloat(a)) ? -1 : parseFloat(a),
                    s = isNaN(parseFloat(s)) ? -1 : parseFloat(s),
                    l = parseFloat(l),
                    e < 0 || t < 0 || a < 0 || s < 0 || l <= 0)
                        return 0;
                    var i = 0;
                    return a > 0 && (t > 0 ? (i = (t / 100 + 1) * s / (l - a * (t / 100 + 1)),
                    i = Math.ceil(round(i, 3))) : i = 1,
                    i > 0 && i < e && (i = e)),
                    i
                }
                  , t = -1;
                if ($.each(ps.canTraceIssues, function(e, a) {
                    a == $("#startIssue").val() && (t = e)
                }),
                -1 == t)
                    throw alert("数据出错"),
                    "数据出错";
                isNaN(parseInt($("#traceNum").val())) && $("#traceNum").val("1");
                var a = ps.canTraceIssues.slice(t, t + parseInt($("#traceNum").val()));
                a.length < $("#traceNum").val() && (parent.layer.alert("最多只能追" + a.length + "期", {
                    icon: 7
                }),
                $("#traceNum").val(a.length)),
                $("#style2Body").empty();
                var s, l, i = [], r = 0, n = 2 * parseInt($("#singleNum").text()) * ps.curMode, o = ps.traceMethodPrize * (ps.rebateGapList.get(ps.curPrizeIndex).prize / (ps.maxCombPrize * ps.prizeRate)) * ps.curMode;
                $.each(a, function(t, a) {
                    if (1 == $("input[name=profitStyle]:checked").val())
                        if (0 == t) {
                            if (s = parseInt($("#startMultiple").val()),
                            l = s * parseInt($("#singleNum").text()) * 2 * ps.curMode,
                            (s * o - l) / l * 100 < $("input[name=totalProfitRate]").val())
                                return parent.layer.alert("该计划无法实现，请调整目标", {
                                    icon: 7
                                }),
                                !1
                        } else
                            s = e($("#startMultiple").val(), $("input[name=totalProfitRate]").val(), n, r, o);
                    else if (2 == $("input[name=profitStyle]:checked").val())
                        if (0 == t) {
                            if (s = parseInt($("#startMultiple").val()),
                            l = s * parseInt($("#singleNum").text()) * 2 * ps.curMode,
                            (s * o - l) / l * 100 < $("input[name=first5RateValue]").val())
                                return parent.layer.alert("该计划无法实现，请调整目标", {
                                    icon: 7
                                }),
                                !1
                        } else
                            s = t < $("input[name=first5Rate]").val() ? e($("#startMultiple").val(), $("input[name=first5RateValue]").val(), n, r, o) : e($("#startMultiple").val(), $("input[name=laterRateValue]").val(), n, r, o);
                    else
                        3 == $("input[name=profitStyle]:checked").val() ? (s = Math.ceil(round((parseInt($("input[name=totalProfit]").val()) + r) / (o - 2 * parseInt($("#singleNum").text()) * ps.curMode), 3))) < $("#startMultiple").val() && (s = $("#startMultiple").val()) : 4 == $("input[name=profitStyle]:checked").val() && (s = t < $("input[name=first5Profit]").val() ? Math.ceil(round((parseInt($("input[name=first5ProfitValue]").val()) + r) / (o - 2 * parseInt($("#singleNum").text()) * ps.curMode), 3)) : Math.ceil(round((parseInt($("input[name=laterProfitValue]").val()) + r) / (o - 2 * parseInt($("#singleNum").text()) * ps.curMode), 3)));
                    return 0 == s ? (parent.layer.alert("您输入的参数有误，必须为正整数", {
                        icon: 7
                    }),
                    !1) : s < 0 ? (parent.layer.alert("该计划不可能实现，请调整目标", {
                        icon: 7
                    }),
                    !1) : s * o > ps.tracePrizeLimit ? (parent.layer.alert("该计划超出无法实现，请调整目标", {
                        icon: 7
                    }),
                    !1) : (l = s * parseInt($("#singleNum").text()) * 2 * ps.curMode,
                    r += l,
                    void i.push({
                        issue: a,
                        multiple: s,
                        curMoney: number_format(l, 2),
                        totalMoney: number_format(r, 2),
                        curPrize: number_format(s * o, 2),
                        totalProfit: number_format(s * o - r, 2),
                        totalProfitRate: round((s * o - r) / r, 2)
                    }))
                }),
                traceFunc._showPlan(i)
            },
            _showPlan: function(e) {
                $.each(e, function(e, t) {
                    var a = '<li><span class="spanWidth90px">' + t.issue + '</span><span class="spanWidth50px">' + t.multiple + '</span><span class="spanWidth70px">' + t.curMoney + '</span><span class="spanWidth70px">' + t.totalMoney + '</span><span class="spanWidth70px">' + t.curPrize + '</span><span class="spanWidth70px">' + t.totalProfit + '</span><span class="spanWidth70px">' + Math.round(100 * t.totalProfitRate) + "%</span></li>";
                    $("#style2Body").append(a)
                }),
                traceFunc.updateTotalMoney()
            }
        }
          , initDrawBar = function() {
            $("#curLotteryName").text(ps.lotteryName),
            $("#curLotteryName2").text(ps.lotteryName),
            1 == ps.lotteryType ? $("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li><li class="width55px">前三组态</li><li class="width55px">后三组态</li>') : 2 == ps.lotteryType ? $("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li>') : 4 == ps.lotteryType ? $("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li><li class="width55px">三星组态</li><li class="width55px">三星和值</li>') : 6 == ps.lotteryType ? $("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li><li class="width55px">和值</li><li class="width55px">形态</li>') : 7 == ps.lotteryType && $("#todayIssuesHead").html('<li class="width:30%">期号</li><li style="width:70%">开奖号</li><li class="width55px">形态</li>'),
            $("#todayDrawBtn").find(drawBar.todayDrawBtn_Click),
            $("#prizeRankBtn").click(drawBar.prizeRankBtn_Click),
            drawBar.todayBuyBtnNew_Click(),
            $.each(ps.openedIssues, function(e, t) {
                t.prop = drawBar.getMoreInfo(t.code),
                ps.todayDrawList.push(t)
            }),
            $("#prizeRankBtn").click(),
            drawBar.getCurIssue(drawBar.init)
        }
          , drawBar = {
            init: function() {
                if (runTime.remainTimer = window.setInterval(drawBar.showCurIssue_Timer, 1e3),
                "" == ps.lastIssueInfo.code)
                    ps.getLastOpenTime = 0,
                    clearInterval(runTime.getLastOpenTimer),
                    runTime.getLastOpenTimer = window.setInterval(drawBar.getLastOpen_Timer, 1e3),
                    $("#thisIssueInfo").addClass("lock"),
                    ps.canBuy = !1,
                    $("#thisIssueSpan").text(ps.lastIssueInfo.issue);
                else {
                    var e = ps.todayDrawList[0];
                    if (ps.lastIssueInfo.issue != e.issue) {
                        var t = ps.lastIssueInfo
                          , a = drawBar.getMoreInfo(t.code);
                        if (t.prop = a,
                        ps.todayDrawList.unshift(t),
                        $("#todayDrawBtn").hasClass("cur")) {
                            var s = ps.todayDrawList[0];
                            if (1 == ps.lotteryType)
                                i = '<ul><li class="width80px">' + s.issue + '</li><li class="width60px">' + s.code + '</li><li class="width53px">' + s.prop.qszt + '</li><li class="width53px">' + s.prop.hszt + "</li></ul>";
                            else if (2 == ps.lotteryType)
                                i = '<ul class="fix"><li class="width:30%">' + s.issue + '</li><li class="width:70%">' + s.code + "</li>";
                            else if (4 == ps.lotteryType)
                                i = '<ul><li class="width80px">' + s.issue + '</li><li class="width60px">' + s.code + '</li><li class="width53px">' + s.prop.qszt + '</li><li class="width53px">' + s.prop.qshz + "</li></ul>";
                            else if (6 == ps.lotteryType)
                                var t = s.code.split("")
                                  , l = parseInt(t[0]) + parseInt(t[1]) + parseInt(t[2])
                                  , i = '<ul><li class="width80px">' + s.issue + '</li><li class="width60px">' + s.code + '</li><li class="width53px">' + l + '</li><li class="width53px">' + (l > 10 ? "大" : "小") + (l % 2 ? "单" : "双") + "</li></ul>";
                            else if (7 == ps.lotteryType)
                                i = '<ul><li class="width80px">' + s.issue + '</li><li class="width_poker">' + drawBar.pokerOpenCode(s.code) + '</li><li class="width60px">' + drawBar.getMoreInfo(s.code).pkzt + "</li></ul>";
                            $("#todayIssuesBody").prepend(i)
                        }
                    }
                }
                var r;
                null != ps.todayDrawList[0].code && (1 == ps.lotteryType || 4 == ps.lotteryType || 6 == ps.lotteryType ? r = ps.todayDrawList[0].code.split("") : 2 != ps.lotteryType && 7 != ps.lotteryType || (r = ps.todayDrawList[0].code.split(" "))),
                $('#thisIssueNumUL').empty().hide(),
                $('#pendingText').show(),
                null != r && $.each(r, function(e, t) {
                    1 == ps.lotteryType || 4 == ps.lotteryType ? $('#thisIssueNumUL').append('<span class="pendingBall"></span>') : 2 == ps.lotteryType ? $('#thisIssueNumUL').append('<span class="pendingBall"></span>') : 6 == ps.lotteryType ? $('#thisIssueNumUL').append('<span class="pendingNum_k3' + (e + 1) + ' k3"></span>') : 7 == ps.lotteryType && $('#thisIssueNumUL').append('<div class="pendingNum_poker poker"><span class="poker_kj_num poker_kj_wait' + (e + 1) + ' poker_kj_wait"><i></i><em></em></span></div>')
                }),
                drawBar.showLastDraw(),
                ps.canBuy = !0
            },
            pokerOpenCode: function(code) {
                for (var parts = code.split(' '), trans = {
                    s: 'poker_heit',
                    h: 'poker_hongt',
                    c: 'poker_meih',
                    d: 'poker_fangk'
                }, poker = '', str = '<div class="poker_kj">', i = 0; i < 3; i++)
                    poker = parts[i].split(''),
                    str += '<span class="poker_kj_num ' + eval('trans.' + poker[1]) + '"><i></i><em>' + drawBar.translateT(poker[0]) + '</em></span>';
                return str += '</div>'
            },
            getCurIssue: function(e) {
                $.ajax({
                    url: "?c=game&a=play",
                    type: "POST",
                    data: {
                        op: "getCurIssue",
                        lotteryId: ps.lotteryId
                    },
                    cache: !1,
                    dataType: "json",
                    timeout: 3e4,
                    success: function(t) {
                        if (0 == t.errno)
                            if (0 != t.kTime) {
                                $('#thisIssueMoreInfo').css('display', 'none'),
                                $('.secondBtn').attr("disabled", "disabled"),
                                $('.secondBtn').css("background", "#ccc"),
                                $('#traceBtn').attr("disabled", "disabled"),
                                $('#traceBtn').css("background", "#ccc"),
                                $('#confirmBtn').attr("disabled", "disabled"),
                                $('#confirmBtn').css("background", "#ccc"),
                                $('#lastIssueSpan').text('**'),
                                $('#curIssueSpan').text('**'),
                                $('#thisIssueSpan').text('*************');
                                var a = t.kTime / 1e3;
                                window.setInterval(function() {
                                    var e = subTime(--a)
                                      , t = '<span style="font-size: 26px;color: red; text-align: center;">休市中...</span>';
                                    t += "<div style='font-size: 18px;'><p>距离下次开市:</p><span class='day'>" + e.day + "天<em>:</em></span><span>" + e.hour + "时<em>:</em></span><span>" + e.minute + "分<em>:</em></span><span>" + e.second + "秒</span></div>",
                                    $('#pendingText').html(t),
                                    0 != e.day ? $('.day').show() : $('.day').hide()
                                }, 1e3),
                                window.setTimeout(function() {
                                    clearInterval(runTime.waitOpenTimer)
                                }, t.kTime)
                            } else
                                ps.curIssueInfo = t.issueInfo,
                                ps.curServerTime = t.serverTime,
                                ps.curRemainTime = getTS(ps.curIssueInfo.end_time) - getTS(ps.curServerTime),
                                ps.curWaitOpenTime = 15,
                                ps.lastIssueInfo = t.lastIssueInfo,
                                t.lastIssueInfo && ps.counters > 0 && todayGetCurIssue(t.lastIssueInfo),
                                ps.counters++,
                                "function" == typeof e && e();
                        else
                            alert("系统繁忙，请稍候再试(02)")
                    },
                    error: function(e, t, a) {
                        -1 != a.indexOf("a=logout") || -1 != a.indexOf("a=login") ? (top.layer.alert("您已经超时退出，请重新登录", {
                            icon: 7
                        }),
                        window.location.href = "?a=logout") : top.layer.alert("操作超时，请刷新页面..", {
                            icon: 7
                        })
                    }
                })
            },
            showCurIssue_Timer: function() {
                $("#thisIssueSpan").text(ps.curIssueInfo.issue),
                $("#thisIssueSpan2").text(ps.curIssueInfo.issue);
                var e = subTime(--ps.curRemainTime);
                if (ps.curRemainTime >= 0)
                    $("#thisIssueRemainTime").html("<span>" + e.hour + "</span><em>:</em><span>" + e.minute + "</span><em>:</em><span>" + e.second + "</span>"),
                    $("#thisIssueTimerIcon").removeClass("lock").addClass('clock').text("可以投注"),
                    $('.secondBtn').attr("disabled", !1),
                    $('.secondBtn').css('background', '#0c9907'),
                    $('#traceBtn').attr("disabled", !1),
                    $('#traceBtn').css('background', 'linear-gradient(#f88d57,#e1321f)'),
                    $('#confirmBtn').attr("disabled", !1),
                    $('#confirmBtn').css('background', '#0c9907'),
                    $('#selectCodeBtnFast').attr("disabled", !1),
                    $('#selectCodeBtnFast').css('background', '#f13131'),
                    $('#selectCodeBtn').attr("disabled", !1);
                else {
                    clearInterval(runTime.remainTimer),
                    layer.alert(ps.curIssueInfo.issue + '期销售已封盘....，请进入下一期购买', {
                        icon: 7,
                        time: 3e3
                    }),
                    $('#thisIssueTimerIcon').removeClass('clock').addClass('lock').text("封盘中....."),
                    $('.secondBtn').attr("disabled", !0),
                    $('.secondBtn').css("background", "#ccc"),
                    $('#traceBtn').attr("disabled", !0),
                    $('#traceBtn').css("background", "#ccc"),
                    $('#confirmBtn').attr("disabled", !0),
                    $('#confirmBtn').css("background", "#ccc"),
                    $('#selectCodeBtnFast').attr("disabled", !0),
                    $('#selectCodeBtnFast').css("background", "#ccc"),
                    $('#selectCodeBtn').attr("disabled", !0),
                    $('#thisIssueTimerIcon').removeClass('clock').addClass('lock').text("已截止投注");
                    var t = subTime(ps.curWaitOpenTime);
                    $('#thisIssueRemainTime').html("<span>" + t.hour + "</span><em>:</em><span>" + t.minute + "</span><em>:</em><span>" + t.second + "</span>"),
                    ps.canBuy = !1,
                    runTime.waitOpenTimer = window.setInterval(drawBar.waitOpen_Timer, 1e3)
                }
            },
            waitOpen_Timer: function() {
                $('#pendingText').show(),
                $('#thisIssueNumUL').hide(),
                --ps.curWaitOpenTime;
                var e = subTime(ps.curWaitOpenTime);
                $("#thisIssueRemainTime").html("<span>" + e.hour + "</span><em>:</em><span>" + e.minute + "</span><em>:</em><span>" + e.second + "</span>"),
                ps.curWaitOpenTime < 0 && (clearInterval(runTime.waitOpenTimer),
                drawBar.getCurIssue(drawBar.init))
            },
            getLastOpen_Timer: function() {
                ps.getLastOpenTime++,
                ps.getLastOpenTime % 10 == 0 && $.ajax({
                    url: "?c=game&a=play",
                    type: "POST",
                    data: {
                        op: "getLastIssueCode",
                        lotteryId: ps.lotteryId,
                        issue: ps.lastIssueInfo.issue
                    },
                    cache: !1,
                    dataType: "json",
                    timeout: 3e4,
                    success: function(e) {
                        if (0 == e.errno) {
                            if (0 != e.kTime)
                                clearInterval(runTime.waitOpenTimer),
                                window.location.reload();
                            else if (void 0 !== e.issueInfo.code) {
                                clearInterval(runTime.getLastOpenTimer),
                                ps.getLastOpenTime = 0,
                                ps.lastIssueInfo = e.issueInfo,
                                todayGetCurIssue(e.issueInfo);
                                var t = drawBar.getMoreInfo(e.issueInfo.code);
                                if (e.issueInfo.prop = t,
                                ps.todayDrawList.unshift(e.issueInfo),
                                $("#todayDrawBtn").hasClass("cur")) {
                                    var a = ps.todayDrawList[0];
                                    if (1 == ps.lotteryType)
                                        i = '<ul><li class="width80px">' + a.issue + '</li><li class="width60px">' + a.code + '</li><li class="width53px">' + a.prop.qszt + '</li><li class="width53px">' + a.prop.hszt + "</li></ul>";
                                    else if (2 == ps.lotteryType)
                                        i = '<ul><li class="width247px">' + a.issue + '</li><li class="width247px">' + a.code + "</li>";
                                    else if (4 == ps.lotteryType)
                                        i = '<ul><li class="width80px">' + a.issue + '</li><li class="width60px">' + a.code + '</li><li class="width53px">' + a.prop.qszt + '</li><li class="width53px">' + a.prop.qshz + "</li></ul>";
                                    else if (6 == ps.lotteryType)
                                        var s = a.code.split("")
                                          , l = parseInt(s[0]) + parseInt(s[1]) + parseInt(s[2])
                                          , i = '<ul><li class="width80px">' + a.issue + '</li><li class="width60px">' + a.code + '</li><li class="width53px">' + l + '</li><li class="width53px">' + (l > 10 ? "大" : "小") + (l % 2 ? "单" : "双") + "</li></ul>";
                                    else if (7 == ps.lotteryType)
                                        i = '<ul><li class="width80px">' + a.issue + '</li><li class="width_poker">' + drawBar.pokerOpenCode(a.code) + '</li><li class="width60px">' + drawBar.getMoreInfo(a.code).pkzt + "</li></ul>";
                                    $("#todayIssuesBody").prepend(i)
                                }
                                drawBar.showLastDraw()
                            }
                        } else
                            alert("系统繁忙，请稍候再试(03)")
                    },
                    error: function(e, t, a) {
                        -1 != a.indexOf("a=logout") || -1 != a.indexOf("a=login") ? (top.layer.alert("您已经超时退出，请重新登录", {
                            icon: 7
                        }),
                        window.location.href = "?a=logout") : top.layer.alert("操作超时，请刷新页面...", {
                            icon: 7
                        })
                    }
                })
            },
            showLastDraw: function() {
                var e = ps.todayDrawList[0];
                $("#lastIssueSpan").text(ps.lastIssueInfo.issue),
                $("#curIssueSpan").text(ps.lastIssueInfo.issue);
                var t;
                if (ps.lastIssueInfo.issue == e.issue) {
                    if (null == e.code)
                        return;
                    if ($('#pendingText').hide(),
                    $('#thisIssueNumUL').show(),
                    1 == ps.lotteryType) {
                        a = e.code.split("");
                        t = "<ul><li>三星形态:[<span>" + e.prop.hszt + "</span>]</li><li>三星和值:[<span>" + e.prop.hshz + "</span>]</li><li>二星和值:[<span>" + e.prop.hehz + '</span>]</li><li class="last">大小单双:[<span>' + e.prop.dxds + "</span>]</li></ul>"
                    } else if (2 == ps.lotteryType)
                        t = "<ul><li>第一位：<span>" + (a = e.code.split(" "))[0] + "</span></li><li>第二位：<span>" + a[0] + "," + a[1] + "</span></li></ul><ul><li>第三位：<span>" + a[0] + "," + a[1] + "," + a[2] + "</span></li></ul>";
                    else if (4 == ps.lotteryType) {
                        a = e.code.split("");
                        t = "<ul><li>三星形态:[<span>" + e.prop.qszt + "</span>]</li><li>三星和值:[<span>" + e.prop.qshz + "</span>]</li></ul>"
                    } else if (6 == ps.lotteryType) {
                        var a = e.code.split("")
                          , s = parseInt(a[0]) + parseInt(a[1]) + parseInt(a[2]);
                        t = '<ul><li class="last">形态：[ <span class="bs">' + (s > 10 ? '大' : '小') + '</span> <span class="oe">' + (s % 2 ? '单' : '双') + '</span> ]&nbsp;&nbsp;和值：[ <span class="num">' + s + '</span> ]</li></ul>',
                        $("#openCode").html(e.code)
                    } else {
                        if (7 != ps.lotteryType)
                            throw new exception('无效的数据引用1');
                        a = e.code.split(" ");
                        t = '<ul><li class="last">形态：' + drawBar.getMoreInfo(e.code).pkzt + '</li></ul>'
                    }
                    var l = 0
                      , i = 0;
                    if (7 == ps.lotteryType)
                        var r = drawBar.translateCards(a);
                    $("#todayIssuesBody").find("li:first").text() != ps.curIssueInfo.issue && drawBar.todayBuyBtnNew_Click();
                    var n = function() {
                        if ($("#thisIssueNumUL").children(".pendingBall").length > 0) {
                            e = $("#thisIssueNumUL").children(".pendingBall").first();
                            window.setTimeout(function() {
                                2 == ps.lotteryType ? (e.removeClass("pendingBall sd115Ball").text(a[l++]),
                                e.addClass("sd115_Ball bl" + a[i++])) : (e.removeClass("pendingBall").text(a[l++]),
                                e.addClass("bl" + a[i++])),
                                n()
                            }, 1e3)
                        } else if ($("#thisIssueNumUL").children(".k3").length > 0) {
                            e = $("#thisIssueNumUL").children(".k3").first();
                            window.setTimeout(function() {
                                e.removeClass().addClass("pendingNum_k3_" + a[l++]),
                                n()
                            }, 1e3)
                        } else if ($("#thisIssueNumUL").children(".poker").length > 0) {
                            var e = $("#thisIssueNumUL").children(".poker").first();
                            $("#thisIssueNumUL").addClass("poker_kj_step" + ++l),
                            e.removeClass('poker'),
                            window.setTimeout(function() {
                                e.find('span').removeClass("poker_kj_wait poker_kj_wait" + (i + 1)).addClass(r[i].className),
                                e.find('em').text(r[i].num),
                                i++,
                                n()
                            }, 2e3)
                        }
                    };
                    window.setTimeout(n, 100)
                } else if (6 == ps.lotteryType ? $.each($("#thisIssueNumUL").children(), function(e, t) {
                    $(this).removeClass().addClass("pendingNum_k3" + (e + 1) + " k3")
                }) : 7 == ps.lotteryType ? ($("#thisIssueNumUL").removeClass('poker_kj_step1 poker_kj_step2 poker_kj_step3'),
                $.each($("#thisIssueNumUL").children(), function(e, t) {
                    $(this).removeClass().addClass("pendingNum_poker poker")
                })) : ($("#thisIssueNumUL").children().addClass("pendingBall").removeClass("sd115_Ball"),
                $('#original_code').empty()),
                1 == ps.lotteryType)
                    t = '<ul><li>三星形态:[<span></span>]</li><li>二星和值:[<span></span>]</li><li>三星和值:[<span></span>]</li><li class="last">大小单双:[<span></span>]</li></ul>';
                else if (2 == ps.lotteryType)
                    t = "<ul><li>第一位：<span></span></li><li>第二位：<span></span></li><li>第三位：<span></span></li></ul>";
                else if (4 == ps.lotteryType)
                    t = "<ul><li>三星形态:[<span></span>]</li><li>三星和值:[<span></span>]</li></ul>";
                else if (6 == ps.lotteryType)
                    t = '<ul><li class="last">形态：[ <span class="bs">-</span> <span class="oe">-</span> ]&nbsp;&nbsp;和值：[ <span class="num">-</span> ]</li></ul>',
                    $("#openCode").html('');
                else {
                    if (7 != ps.lotteryType)
                        throw new exception('无效的数据引用2');
                    t = '<ul><li class="last">形态：</li></ul>'
                }
                $("#thisIssueMoreInfo").html(t)
            },
            todayDrawBtn_Click: function() {
                if (1 == ps.lotteryType)
                    $("#todayIssuesHead").html('<li class="wb40">期号</li><li class="wb60">开奖号</li>');
                else if (2 == ps.lotteryType)
                    $("#todayIssuesHead").html('<li class="wb40">期号</li><li class="wb60">开奖号</li>');
                else if (4 == ps.lotteryType)
                    $("#todayIssuesHead").html('<li class="wb40">期号</li><li class="wb60">开奖号</li>');
                else if (6 == ps.lotteryType)
                    $("#todayIssuesHead").html('<li class="wb40">期号</li><li class="wb60">开奖号</li>');
                else {
                    if (7 != ps.lotteryType)
                        throw exception('unknown lt type');
                    $("#todayIssuesHead").html('<li class="wb40">期号</li><li class="wb60">开奖号</li>')
                }
                $("#todayIssuesBody").empty(),
                $.each(ps.todayDrawList, function(e, t) {
                    for (var a = "", s = "", l = 0; l < t.code.length; l++)
                        a += "<b>" + t.code[l] + "</b>",
                        s += t.code[l];
                    if (1 == ps.lotteryType)
                        r = '<ul class="fix"><li style="width:42%;">' + t.issue + '</li><li style="width:55%;">' + a + "</li></ul>";
                    else if (2 == ps.lotteryType)
                        var i = s.split(" ").join("</b><b>")
                          , r = '<ul class="fix1"><li style="width:42%;">' + t.issue + '</li><li style="width:55%;"><b>' + i + "</b></li></ul>";
                    else if (4 == ps.lotteryType)
                        r = '<ul class="fix"><li style="width:42%;">' + t.issue + '</li><li style="width:55%;">' + a + "</li></ul>";
                    else if (6 == ps.lotteryType)
                        var n = t.code.split("")
                          , r = (parseInt(n[0]),
                        parseInt(n[1]),
                        parseInt(n[2]),
                        '<ul class="fix"><li style="width:42%;">' + t.issue + '</li><li style="width:55%;">' + t.code + "</li></ul>");
                    else {
                        if (7 != ps.lotteryType)
                            throw exception('unknown lt type');
                        r = '<ul class="fix"><li style="width:40%;">' + t.issue + '</li><li class="width_poker">' + drawBar.pokerOpenCode(t.code) + '</li><li>' + drawBar.getMoreInfo(t.code).pkzt + "</li></ul>"
                    }
                    $("#todayIssuesBody").append(r)
                })
            },
            prizeRankBtn_Click: function() {
                $("#todayBuyBody").empty().hide(),
                $.post("?c=game&a=play", {
                    op: "getPrizeRank",
                    lotteryId: ps.lotteryId
                }, function(e) {
                    0 == e.errno ? 0 == e.data.length ? $('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#prizeScrollContent") : ($("#prizeScrollContent").empty(),
                    $.each(e.data, function(e, t) {
                        $('<ul><li><span>' + t.nick_name + "</span> 喜中 <em>" + number_format(t.total_prize, 2) + "</em>元</li></ul>").appendTo($("#prizeScrollContent"))
                    }),
                    $("#prizeScrollContent").html($("#prizeScrollContent").html() + $("#prizeScrollContent").html()).show(),
                    0 == runTime.scollTopIntervalTimer && (runTime.scollTopIntervalTimer = window.setInterval(drawBar.scrollPrizeRank, 100),
                    $("#prizeScrollContent").mouseover(function() {
                        clearInterval(runTime.scollTopIntervalTimer)
                    }).mouseout(function() {
                        runTime.scollTopIntervalTimer = window.setInterval(drawBar.scrollPrizeRank, 100)
                    }))) : alert("暂时没有排行数据！")
                }, "json")
            },
            todayBuyBtnNew_Click: function() {
                $("#todayIssuesBody").find("li:first").text() != ps.curIssueInfo.issue && $.post("?c=game&a=play", {
                    op: "getBuyRecords",
                    lotteryId: ps.lotteryId
                }, function(e) {
                    0 == e.errno ? ($("#todayBuyBody").empty(),
                    $('<ul><li class="C1">玩法</li><li class="C2">期号</li><li class="C4">金额</li><li class="C5">状态</li></ul><div class="clear"></div>').appendTo("#todayBuyBody"),
                    0 == e.prj.length ? $('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#todayBuyBody") : $.each(e.prj, function(e, t) {
                        7 == ps.lotteryType && (t.code = t.code.replace(/T/g, '10')),
                        $('<ul class="fix"><li class="C1"><a href="javascript:void(0);" onclick="showPackageDetail(\'' + t.wrapId + '\');return false;">' + t.methodName + '</a></li><li class="C2">' + helper.getNumByIssue(t.issue) + '</li><li class="C4">' + t.amount + '</li><li class="C5">' + t.prizeStatus + "</li></ul>").click(function() {}).appendTo("#todayBuyBody")
                    })) : alert("系统繁忙，请稍候再试(04)")
                }, "json")
            },
            scrollPrizeRank: function() {
                var e = $("#prizeScrollContent")[0];
                e.scrollTop += 1,
                e.scrollTop >= $("#prizeScrollContent")[0].scrollHeight / 2 && (e.scrollTop = 0)
            },
            getMoreInfo: function(e) {
                var t = {};
                if (1 == ps.lotteryType || 4 == ps.lotteryType) {
                    if (null == e)
                        return;
                    a = e.split("");
                    t.qshz = parseInt(a[0]) + parseInt(a[1]) + parseInt(a[2]),
                    t.qszt = drawBar.zutai(a[0], a[1], a[2]),
                    t.hshz = parseInt(a[2]) + parseInt(a[3]) + parseInt(a[4]),
                    t.hszt = drawBar.zutai(a[2], a[3], a[4]),
                    t.hehz = parseInt(a[3]) + parseInt(a[4]),
                    t.dxds = drawBar.dxds(a[3], a[4])
                } else if (7 == ps.lotteryType) {
                    var a = e.split(" ");
                    t.pkzt = drawBar.pokerZutai(a[0], a[1], a[2])
                }
                return t
            },
            translateT: function(e) {
                return 'T' == e ? '10' : e
            },
            translateCards: function(e) {
                for (var t, a = [], s = 0; s < e.length; s++) {
                    switch (t = {
                        num: "",
                        className: ""
                    },
                    e[s].charAt(0)) {
                    case 'T':
                        t.num = '10';
                        break;
                    default:
                        t.num = e[s].charAt(0)
                    }
                    switch (e[s].charAt(1)) {
                    case 's':
                        t.className = 'poker_heit';
                        break;
                    case 'h':
                        t.className = 'poker_hongt';
                        break;
                    case 'c':
                        t.className = 'poker_meih';
                        break;
                    case 'd':
                        t.className = 'poker_fangk';
                        break;
                    default:
                        throw new exception('unknown color')
                    }
                    a.push(t)
                }
                return a
            },
            zutai: function(e, t, a) {
                return e == t && e == a && t == a ? "豹子" : e == t || e == a || t == a ? "组三" : "组六"
            },
            dxds: function(e, t) {
                var a = []
                  , s = [];
                return a.push(e >= 5 ? "大" : "小"),
                a.push(e % 2 == 1 ? "单" : "双"),
                s.push(t >= 5 ? "大" : "小"),
                s.push(t % 2 == 1 ? "单" : "双"),
                [a[0] + s[0], a[0] + s[1], a[1] + s[0], a[1] + s[1]].join(",")
            },
            pokerZutai: function(e, t, a) {
                var s = [helper.pokerNumMaps[e.charAt(0)], helper.pokerNumMaps[t.charAt(0)], helper.pokerNumMaps[a.charAt(0)]];
                return s.sort(),
                e.charAt(0) == t.charAt(0) && e.charAt(0) == a.charAt(0) && t.charAt(0) == a.charAt(0) ? "豹子" : s[0] + 1 == s[1] && s[1] + 1 == s[2] || 1 == s[0] && 12 == s[1] && 13 == s[2] ? e.charAt(1) == t.charAt(1) && e.charAt(1) == a.charAt(1) && t.charAt(1) == a.charAt(1) ? "同花顺" : "顺子" : e.charAt(1) == t.charAt(1) && e.charAt(1) == a.charAt(1) && t.charAt(1) == a.charAt(1) ? "同花" : e.charAt(0) == t.charAt(0) || t.charAt(0) == a.charAt(0) || e.charAt(0) == a.charAt(0) ? "对子" : "散牌"
            }
        };
        if (!verifyParams())
            return parent.layer.alert("数据初始化失败", {
                icon: 2
            }),
            !1;
        initPrizeBar(),
        initModesBar(),
        initMethodBar(),
        initMissHotBar(),
        initBuyBar(),
        initDrawBar();
        var isLegalCode = function(e) {
            if (0 == allHasValue(e).charsNum)
                return {
                    singleNum: 0,
                    isDup: 0
                };
            var t, a = 0, s = 0;
            switch (ps.curMethod.name) {
            case 'SXZX':
            case "ZSZX":
            case 'QSZX':
                s = (a = e[0].length * e[1].length * e[2].length) > 1 ? 1 : 0;
                break;
            case 'SXZS':
            case "ZSZS":
            case 'QSZS':
                s = (a = e[0].length * (e[0].length - 1)) > 2 ? 1 : 0;
                break;
            case 'SXZL':
            case "ZSZL":
            case 'QSZL':
                s = (a = e[0].length * (e[0].length - 1) * (e[0].length - 2) / helper.factorial(3)) > 1 ? 1 : 0;
                break;
            case 'SXLX':
            case "ZSLX":
            case 'QSLX':
                if (0 == allHasValue(e).flag)
                    return {
                        singleNum: 0,
                        isDup: 0
                    };
                var l = 0
                  , i = 0
                  , r = 0;
                l = e[0].length * e[1].length * e[2].length,
                i = e[1].length * e[2].length,
                r = e[2].length,
                s = (a = l + i + r) > 3 ? 1 : 0;
                break;
            case 'SXBD':
            case "ZSBD":
            case 'QSBD':
                t = e[0].split('_'),
                $.each(t, function(e, t) {
                    a += helper.SXBD[t]
                }),
                s = t.length > 1 ? 1 : 0;
                break;
            case 'SXHHZX':
            case "ZSHHZX":
            case 'QSHHZX':
                s = (a = e[0].length * e[1].length * e[2].length) > 1 ? 1 : 0;
                break;
            case 'EXZX':
            case 'QEZX':
                s = (a = e[0].length * e[1].length) > 1 ? 1 : 0;
                break;
            case 'EXZUX':
            case 'QEZUX':
                s = (a = e[0].length * (e[0].length - 1) / 2) > 1 ? 1 : 0;
                break;
            case 'EXLX':
            case 'QELX':
                if (0 == allHasValue(e).flag)
                    return {
                        singleNum: 0,
                        isDup: 0
                    };
                var i = 0
                  , r = 0;
                i = e[0].length * e[1].length,
                r = e[1].length,
                s = (a = i + r) > 2 ? 1 : 0;
                break;
            case 'EXBD':
            case 'QEBD':
                t = e[0].split('_'),
                $.each(t, function(e, t) {
                    a += helper.EXBD[t]
                }),
                s = t.length > 1 ? 1 : 0;
                break;
            case 'YXZX':
                s = (a = e[0].length) > 1 ? 1 : 0;
                break;
            case 'WXDW':
                for (c = 0; c < 5; c++)
                    '-' != e[c] && (a += e[c].length);
                s = a > 1 ? 1 : 0;
                break;
            case 'SXDW':
                s = (a = e[0].length + e[1].length + e[2].length) > 1 ? 1 : 0;
                break;
            case 'EMBDW':
            case 'QSEMBDW':
            case 'ZSEMBDW':
            case 'SXEMBDW':
            case 'WXEMBDW':
                a = e[0].length * (e[0].length - 1) / 2,
                s = 0;
                break;
            case 'WXSMBDW':
                a = e[0].length * (e[0].length - 1) * (e[0].length - 2) / 6,
                s = 0;
                break;
            case 'EXDXDS':
            case 'QEDXDS':
                a = e[0].length * e[1].length == 1 ? 1 : 0,
                s = 0;
                break;
            case 'SXDXDS':
                a = e[0].length * e[1].length * e[2].length == 1 ? 1 : 0,
                s = 0;
                break;
            case 'YMBDW':
            case 'ZSYMBDW':
            case 'SXYMBDW':
            case 'WXYMBDW':
            case 'QSYMBDW':
                a = e[0].length,
                s = 0;
                break;
            case 'SXHZ':
            case "ZSHZ":
            case 'QSHZ':
                t = e[0].split('_'),
                $.each(t, function(e, t) {
                    a += helper.SXHZ[t]
                }),
                s = t.length > 1 ? 1 : 0;
                break;
            case 'EXHZ':
            case 'QEHZ':
                t = e[0].split('_'),
                $.each(t, function(e, t) {
                    a += helper.EXHZ[t]
                }),
                s = t.length > 1 ? 1 : 0;
                break;
            case 'SXZXHZ':
            case 'QSZXHZ':
                t = e[0].split('_'),
                $.each(t, function(e, t) {
                    a += helper.SXZXHZ[t]
                }),
                s = t.length > 1 ? 1 : 0;
                break;
            case 'SIXZX':
            case 'QSIZX':
                s = (a = e[0].length * e[1].length * e[2].length * e[3].length) > 1 ? 1 : 0;
                break;
            case 'WXZX':
                s = (a = e[0].length * e[1].length * e[2].length * e[3].length * e[4].length) > 1 ? 1 : 0;
                break;
            case 'WXLX':
                if (0 == allHasValue(e).flag)
                    return {
                        singleNum: 0,
                        isDup: 0
                    };
                var n = 0
                  , l = 0
                  , i = 0
                  , r = 0;
                n = e[0].length * e[1].length * e[2].length * e[3].length * e[4].length,
                l = e[2].length * e[3].length * e[4].length,
                i = e[3].length * e[4].length,
                r = e[4].length,
                s = (a = n + l + i + r) > 4 ? 1 : 0;
                break;
            case 'REZX':
                for (c = 0; c < 4; c++)
                    if ('-' != e[c])
                        for (p = c + 1; p < 5; p++)
                            '-' != e[p] && (a += e[c].length * e[p].length);
                s = a > 1 ? 1 : 0;
                break;
            case 'RSZX':
                for (c = 0; c < 3; c++)
                    if ('-' != e[c])
                        for (p = c + 1; p < 4; p++)
                            if ('-' != e[p])
                                for (d = p + 1; d < 5; d++)
                                    '-' != e[d] && (a += e[c].length * e[p].length * e[d].length);
                s = a > 1 ? 1 : 0;
                break;
            case 'RSIZX':
                for (var o = 0; o < 2; o++)
                    if ('-' != e[o])
                        for (var c = o + 1; c < 3; c++)
                            if ('-' != e[c])
                                for (var p = c + 1; p < 4; p++)
                                    if ('-' != e[p])
                                        for (var d = p + 1; d < 5; d++)
                                            '-' != e[d] && (a += e[o].length * e[c].length * e[p].length * e[d].length);
                s = a > 1 ? 1 : 0;
                break;
            case 'SDQSZX':
                if (3 != e.length)
                    return {
                        singleNum: 0,
                        isDup: 0
                    };
                u = helper.expandLotto(e);
                s = (a = u.length) > 1 ? 1 : 0;
                break;
            case 'SDQEZX':
                if (2 != e.length)
                    return {
                        singleNum: 0,
                        isDup: 0
                    };
                var u = helper.expandLotto(e);
                s = (a = u.length) > 1 ? 1 : 0;
                break;
            case 'SDQSZUX':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) / helper.factorial(3)) > 1 ? 1 : 0;
                break;
            case 'SDQEZUX':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) / 2) > 1 ? 1 : 0;
                break;
            case 'SDRX1':
                t = e[0].split('_'),
                s = (a = t.length) > 1 ? 1 : 0;
                break;
            case 'SDRX2':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) / 2) > 1 ? 1 : 0;
                break;
            case 'SDRX3':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) / 6) > 1 ? 1 : 0;
                break;
            case 'SDRX4':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) * (t.length - 3) / 24) > 1 ? 1 : 0;
                break;
            case 'SDRX5':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) * (t.length - 3) * (t.length - 4) / 120) > 1 ? 1 : 0;
                break;
            case 'SDRX6':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) * (t.length - 3) * (t.length - 4) * (t.length - 5) / 720) > 1 ? 1 : 0;
                break;
            case 'SDRX7':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) * (t.length - 3) * (t.length - 4) * (t.length - 5) * (t.length - 6) / 5040) > 1 ? 1 : 0;
                break;
            case 'SDRX8':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) * (t.length - 3) * (t.length - 4) * (t.length - 5) * (t.length - 6) * (t.length - 7) / 40320) > 1 ? 1 : 0;
                break;
            case 'SDQSBDW':
                t = e[0].split('_'),
                s = (a = t.length) > 1 ? 1 : 0;
                break;
            case 'SDQSDWD':
                $.each(e, function(e, s) {
                    '' != s && (t = s.split('_'),
                    a += t.length)
                }),
                s = a > 3 ? 1 : 0;
                break;
            case 'SDDDS':
            case 'SDCZW':
                a = 1,
                s = 1;
                break;
            case 'YFFS':
            case 'HSCS':
            case 'SXBX':
            case 'SJFC':
                s = (a = e[0].length) > 1 ? 1 : 0;
                break;
            case 'ZUX120':
                e[0].length > 4 && (a = 5 === e[0].length ? 1 : helper.factorial(e[0].length) / (120 * helper.factorial(e[0].length - 5))),
                s = a > 1 ? 1 : 0;
                break;
            case 'ZUX24':
                e[0].length > 3 && (a = helper.factorial(e[0].length) / (24 * helper.factorial(e[0].length - 4))),
                s = a > 1 ? 1 : 0;
                break;
            case 'ZUX6':
                e[0].length > 1 && (a = helper.factorial(e[0].length) / (2 * helper.factorial(e[0].length - 2))),
                s = a > 1 ? 1 : 0;
                break;
            case 'ZUX10':
            case 'ZUX5':
            case 'ZUX4':
                if (e[0].length > 0 && e[1].length > 0) {
                    h = e[1].length;
                    for (c = 0; c < e[0].length; c++) {
                        m = h;
                        e[1].indexOf(e[0].substr(c, 1)) > -1 && (m = h - 1),
                        m > 0 && (a += helper.factorial(m) / helper.factorial(m - 1))
                    }
                }
                s = a > 1 ? 1 : 0;
                break;
            case 'ZUX20':
            case 'ZUX12':
                if (e[0].length > 0 && e[1].length > 1) {
                    h = e[1].length;
                    for (c = 0; c < e[0].length; c++) {
                        m = h;
                        e[1].indexOf(e[0].substr(c, 1)) > -1 && (m = h - 1),
                        m > 1 && (a += helper.factorial(m) / (2 * helper.factorial(m - 2)))
                    }
                }
                s = a > 1 ? 1 : 0;
                break;
            case 'ZUX60':
                if (e[0].length > 0 && e[1].length > 2) {
                    h = e[1].length;
                    for (c = 0; c < e[0].length; c++) {
                        m = h;
                        e[1].indexOf(e[0].substr(c, 1)) > -1 && (m = h - 1),
                        m > 2 && (a += helper.factorial(m) / (6 * helper.factorial(m - 3)))
                    }
                }
                s = a > 1 ? 1 : 0;
                break;
            case 'ZUX30':
                if (e[0].length > 1 && e[1].length > 0) {
                    var h = e[0].length;
                    for (c = 0; c < e[1].length; c++) {
                        var m = h;
                        e[0].indexOf(e[1].substr(c, 1)) > -1 && (m = h - 1),
                        m > 1 && (a += helper.factorial(m) / (2 * helper.factorial(m - 2)))
                    }
                }
                s = a > 1 ? 1 : 0;
                break;
            case 'JSETDX':
                if (2 != e.length)
                    return {
                        singleNum: 0,
                        isDup: 0
                    };
                var f = e[0].length ? e[0].split('_') : []
                  , y = e[1].length ? e[1].split('') : [];
                s = (a = f.length * y.length) > 1 ? 1 : 0;
                break;
            case 'JSETFX':
                t = e[0].split('_'),
                s = (a = t.length) > 1 ? 1 : 0;
                break;
            case 'JSHZ':
                t = e[0].split('_'),
                a = t.length,
                s = t.length > 1 ? 1 : 0;
                break;
            case 'JSSTTX':
            case 'JSSLTX':
                s = (a = 1) > 1 ? 1 : 0;
                break;
            case 'JSEBT':
                b = e[0].length;
                a = (b - 1) * b / 2,
                s = b > 2 ? 1 : 0;
                break;
            case 'JSSTDX':
                t = e[0].split('_'),
                a = t.length,
                s = t.length > 1 ? 1 : 0;
                break;
            case 'JSSBT':
                var b = e[0].length;
                a = (b - 1) * (b - 2) * b / 6,
                s = b > 3 ? 1 : 0;
                break;
            case 'PKSZ':
            case 'PKBZ':
            case 'PKDZ':
            case 'PKTH':
            case 'PKTHS':
            case 'PKBX':
            case 'PKRX1':
                t = e[0].split('_'),
                s = (a = t.length) > 1 ? 1 : 0;
                break;
            case 'PKRX2':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) / 2) > 1 ? 1 : 0;
                break;
            case 'PKRX3':
                t = e[0].split('_'),
                s = (a = t.length * (t.length - 1) * (t.length - 2) / 6) > 1 ? 1 : 0;
                break;
            case 'PKRX4':
                t = e[0].split('_'),
                a = t.length;
                v = t.length;
                s = (a = v * (v - 1) * (v - 2) * (v - 3) / 24) > 1 ? 1 : 0;
                break;
            case 'PKRX5':
                v = (t = e[0].split('_')).length;
                s = (a = v * (v - 1) * (v - 2) * (v - 3) * (v - 4) / 120) > 1 ? 1 : 0;
                break;
            case 'PKRX6':
                var v = (t = e[0].split('_')).length;
                s = (a = v * (v - 1) * (v - 2) * (v - 3) * (v - 4) * (v - 5) / 720) > 1 ? 1 : 0;
                break;
            default:
                throw "unknown method2 " + ps.curMethod.name
            }
            return {
                singleNum: a,
                isDup: s
            }
        }
    }
}(jQuery);
